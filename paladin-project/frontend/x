import { Switch, Route } from "wouter";
import { queryClient } from "@/lib/QueryClient";
import { QueryClientProvider } from "@tanstack/react-query";
import { TooltipProvider } from "@/components/ui/tooltip";
import { ThemeProvider } from "@/hooks/use-theme";
import { Header } from "@/components/layout/Header";
import Home from "@/pages/Home";
import CoursePage from "@/pages/CoursePage";
import LibraryPage from "./pages/LibraryPage";
import { ModeSidebarProvider } from "@/hooks/use-mode-sidebar";
import FocusMode from "./pages/FocusMode";
import TestMode from "./pages/TestMode";
import WorkMode from "./pages/ReviseMode";
import { ModeSidebar } from "@/components/layout/ModeSidebar";
import { ToggleModeButton } from "./components/layout/ToggleModeButton";
import Notes from "./pages/Notes";
import Flashcards from "./pages/Flashcards";
import MindMaps from "./pages/MindMaps";
import TestReview from "./pages/Testreviews";
import Summary from "./pages/Summary";
import Settings from "./pages/Settings";
import Quiz from "./pages/Quiz";
import LoginPage from "./pages/LoginPage";

function Router() {
  return (
    <Switch>
      <Route path="/" component={Home} />
      <Route path="/library" component={LibraryPage} />
      <Route path="/settings" component={Settings} />
      <Route path="/mode/focus" component={FocusMode} />
      <Route path="/mode/work" component={WorkMode} />
      <Route path="/mode/test" component={TestMode} />
      <Route path="/research" component={Home} />
      <Route path="/safety" component={Home} />
      <Route path="/business" component={Home} />
      <Route path="/developers" component={Home} />
      <Route path="/chatgpt" component={Home} />
      <Route path="/sora" component={Home} />
      <Route path="/stories" component={Home} />
      <Route path="/company" component={Home} />
      <Route path="/news" component={Home} />
      <Route path="/@me" component={Home}/>
      <Route path="/@me/content" component={LibraryPage}/>
      <Route path="/@me/content/:courseId" component={CoursePage} />
      <Route path="/@me/content/:courseId/summary" component={Summary} />
      <Route path="/@me/content/:courseId/notes" component={Notes} />
      <Route path="/@me/content/:courseId/flashcards" component={Flashcards} />
      <Route path="/@me/content/:courseId/mindmaps" component={MindMaps} />
      <Route path="/@me/content/:courseId/quiz" component={Quiz} />
      <Route path="/@me/content/:courseId/tests" component={TestReview} />
      <Route path="/@me/content/:courseId/:stepId" component={FocusMode} />
      <Route path="/login" component={LoginPage}/>
    </Switch>
  );
}

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <ThemeProvider>
        <ModeSidebarProvider>
          <TooltipProvider>
            <div className="flex min-h-screen flex-col bg-background">
              <Header />
              <div className="flex flex-1">
                <ModeSidebar/>
                <main className="flex flex-1 flex-col">
                  <Router />
                </main>
                <ToggleModeButton />
              </div>
            </div>
          </TooltipProvider>
        </ModeSidebarProvider>
      </ThemeProvider>
    </QueryClientProvider>
  );
}

export default App;
import React from 'react';
import ReactDOM from 'react-dom/client';
import './assets/styles/index.css';
import App from './App';
import { AuthProvider } from './hooks/use-auth';

// Add global error handler
window.onerror = function(message, source, lineno, colno, error) {
  console.error("Caught a global error:", { message, source, lineno, colno, error });
  // You might want to send this error to a logging service in a real app
  return true; // Prevent default browser error handling
};
const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <React.StrictMode>
    <AuthProvider>
      <App />
    </AuthProvider>
  </React.StrictMode>
);@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Newsreader:ital,wght@0,400;0,600;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 0%;
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 98%;
    --secondary-foreground: 0 0% 0%;
    --muted: 0 0% 98%;
    --muted-foreground: 0 0% 45%;
    --primary: 152 30% 52%;
     --accent: 152 30% 52%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 88%;
    --input: 0 0% 88%;
    --ring: 152 30% 58%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 0%;
    --foreground: 0 0% 100%;
    --card: 0 0% 10%;
    --card-foreground: 0 0% 100%;
    --popover: 0 0% 10%;
    --popover-foreground: 0 0% 100%;
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 14%;
    --secondary-foreground: 0 0% 100%;
    --muted: 0 0% 14%;
    --muted-foreground: 0 0% 60%;
    --primary: 152 30% 52%;
    --accent: 152 30% 52%;
    --accent-foreground: 0 0% 0%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 18%;
    --input: 0 0% 18%;
    --ring: 152 30% 58%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-feature-settings: 'cv11', 'ss01';
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Newsreader', Georgia, serif;
    font-weight: 600;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}import { Badge } from "@/components/ui/badge";
import { Card } from "@/components/ui/card";
import { BookOpen, Clock, Calendar } from "lucide-react";
import type { ContentCard as ContentCardType } from "@/lib/data";
import { Link } from "wouter";

interface ContentCardProps {
  card: ContentCardType;
  variant?: "featured" | "standard" | "compact";
}

export function ContentCard({ card, variant = "standard" }: ContentCardProps) {
  const isFeatured = variant === "featured";
  const isCompact = variant === "compact";
  const progressValue = card.progress || 0;
  const progressPercent = `${progressValue}%`;

  return (
    <Link to={card.href} className="group block h-full" data-testid={`link-card-${card.id}`}>
      <Card className="h-full overflow-hidden border border-border/50 bg-card shadow-sm hover:shadow-xl hover:border-border transition-all duration-300 hover:-translate-y-1">
        {/* Image Container */}
        <div
          className={`relative overflow-hidden bg-muted ${
            isFeatured ? "aspect-video" : isCompact ? "aspect-square" : "aspect-[4/3]"
          }`}
        >
          <img
            src={card.image}
            alt={card.title}
            className="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"
            loading="lazy"
          />
          {/* Gradient Overlay */}
          <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
          {/* Category Badge on Image */}
          <div className="absolute top-3 left-3">
            <Badge
              variant="secondary"
              className="text-xs font-medium bg-background/90 backdrop-blur-sm text-foreground border-0 shadow-md"
            >
              {card.category}
            </Badge>
          </div>
          {/* Quick Action Button */}
          <div className="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <button className="p-2 rounded-full bg-background/90 backdrop-blur-sm hover:bg-primary hover:text-primary-foreground transition-colors shadow-md">
              <BookOpen className="h-4 w-4" />
            </button>
          </div>
        </div>
        {/* Content */}
        <div className={`p-5 ${isCompact ? "pb-4" : "pb-5"}`}>
          <h3
            className={`font-semibold leading-tight text-foreground group-hover:text-primary transition-colors line-clamp-2 ${
              isFeatured ? "text-xl md:text-2xl mb-2" : isCompact ? "text-base" : "text-lg"
            }`}
            data-testid={`text-card-title-${card.id}`}
          >
            {card.title}
          </h3>
          {/* Description (only for featured and standard) */}
          {!isCompact && card.description && (
            <p className="mt-2 text-sm text-muted-foreground line-clamp-2">
              {card.description}
            </p>
          )}
          {/* Metadata */}
          <div className="mt-4 flex flex-wrap items-center gap-3 text-xs text-muted-foreground">
            {card.date && (
              <div className="flex items-center gap-1" data-testid={`text-date-${card.id}`}>
                <Calendar className="h-3.5 w-3.5" />
                <span>{card.date}</span>
              </div>
            )}
            {card.readTime && (
              <div className="flex items-center gap-1" data-testid={`text-readtime-${card.id}`}>
                <Clock className="h-3.5 w-3.5" />
                <span>{card.readTime}</span>
              </div>
            )}
          </div>
          {/* Progress Bar (optional, show only if progress is defined and !isCompact) */}
          {!isCompact && card.progress && (
            <div className="mt-4 pt-4 border-t border-border/50">
              <div className="flex items-center justify-between text-xs mb-2">
                <span className="text-muted-foreground">Progress</span>
                <span className="font-medium text-primary">{progressPercent}</span>
              </div>
              <div className="w-full h-1.5 bg-secondary rounded-full overflow-hidden">
                <div
                  className="h-full bg-primary transition-all duration-500 rounded-full"
                  style={{ width: progressPercent }}
                />
              </div>
            </div>
          )}
        </div>
      </Card>
    </Link>
  );
}import { ArrowRight, Filter, Grid3x3, List } from "lucide-react";
import { Button } from "@/components/ui/button";
import { ContentCard } from "./ContentCard";
import type { ContentCard as ContentCardType } from "@/lib/data";
import { useState } from "react";
interface ContentSectionProps {
  title: string;
  description?: string;
  viewAllHref?: string;
  cards: ContentCardType[];
  columns?: 2 | 3 | 4 | 6;
  cardVariant?: "featured" | "standard" | "compact";
  showFilters?: boolean;
}
export function ContentSection({
  title,
  description,
  viewAllHref,
  cards,
  columns = 3,
  cardVariant = "standard",
  showFilters = false,
}: ContentSectionProps) {
  const [viewMode, setViewMode] = useState<"grid" | "list">("grid");
  const [sortBy, setSortBy] = useState<"recent" | "popular">("recent");
 
  const gridCols = {
    2: "md:grid-cols-2",
    3: "md:grid-cols-2 lg:grid-cols-3",
    4: "md:grid-cols-2 lg:grid-cols-4",
    6: "md:grid-cols-3 lg:grid-cols-6",
  };
 
  return (
    <section className="py-12 md:py-16 animate-fade-in">
      {/* Section Header */}
      <div className="mb-8">
        <div className="flex items-start justify-between gap-4 mb-4">
          <div>
            <h2
              className="text-3xl md:text-4xl font-bold tracking-tight text-foreground mb-2"
              data-testid={`text-section-title-${title.toLowerCase().replace(/\s+/g, "-")}`}
            >
              {title}
            </h2>
            {description && (
              <p className="text-muted-foreground text-sm md:text-base max-w-2xl">
                {description}
              </p>
            )}
          </div>
         
          {viewAllHref && (
            <Button
              variant="ghost"
              size="sm"
              className="group gap-1.5 text-muted-foreground hover:text-primary shrink-0"
              asChild
            >
              <a href={viewAllHref} data-testid={`link-view-all-${title.toLowerCase().replace(/\s+/g, "-")}`}>
                <span className="hidden sm:inline">View all</span>
                <span className="sm:hidden">All</span>
                <ArrowRight className="h-4 w-4 transition-transform group-hover:translate-x-1" />
              </a>
            </Button>
          )}
        </div>
       
        {/* Filters & View Options */}
        {showFilters && (
          <div className="flex items-center justify-between gap-4 pt-4 border-t border-border/50">
            <div className="flex items-center gap-2">
              <Button
                variant="outline"
                size="sm"
                className="gap-2"
              >
                <Filter className="h-4 w-4" />
                <span className="hidden sm:inline">Filter</span>
              </Button>
             
              <select
                value={sortBy}
                onChange={(e) => setSortBy(e.target.value as "recent" | "popular")}
                className="px-3 py-1.5 text-sm border border-border rounded-lg bg-background hover:bg-secondary transition-colors"
              >
                <option value="recent">Most Recent</option>
                <option value="popular">Most Popular</option>
              </select>
            </div>
           
            <div className="flex items-center gap-1 bg-secondary/50 rounded-lg p-1">
              <Button
                variant={viewMode === "grid" ? "secondary" : "ghost"}
                size="icon"
                onClick={() => setViewMode("grid")}
                className="h-8 w-8"
              >
                <Grid3x3 className="h-4 w-4" />
              </Button>
              <Button
                variant={viewMode === "list" ? "secondary" : "ghost"}
                size="icon"
                onClick={() => setViewMode("list")}
                className="h-8 w-8"
              >
                <List className="h-4 w-4" />
              </Button>
            </div>
          </div>
        )}
      </div>
     
      {/* Content Grid */}
      <div className={`grid grid-cols-1 gap-6 ${viewMode === "grid" ? gridCols[columns] : ""}`}>
        {cards.map((card, index) => (
          <div
            key={card.id}
            className="animate-slide-up"
            style={{ animationDelay: `${index * 50}ms` }}
          >
            <ContentCard card={card} variant={cardVariant} />
          </div>
        ))}
      </div>
     
      {/* Load More */}
      {cards.length >= 6 && (
        <div className="mt-8 text-center">
          <Button
            variant="outline"
            className="gap-2 hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all"
          >
            Load More
            <ArrowRight className="h-4 w-4" />
          </Button>
        </div>
      )}
    </section>
  );
}import { useRef, useState, useEffect } from "react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import { Button } from "@/components/ui/button";
import { ContentCard } from "./ContentCard";
import type { ContentCard as ContentCardType } from "@/lib/data";

interface FeaturedCarouselProps {
  cards: ContentCardType[];
}

export function FeaturedCarousel({ cards }: FeaturedCarouselProps) {
  const scrollRef = useRef<HTMLDivElement>(null);
  const [canScrollLeft, setCanScrollLeft] = useState(false);
  const [canScrollRight, setCanScrollRight] = useState(true);

  const checkScroll = () => {
    if (scrollRef.current) {
      const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current;
      setCanScrollLeft(scrollLeft > 0);
      setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 10);
    }
  };

  useEffect(() => {
    checkScroll();
    const ref = scrollRef.current;
    if (ref) {
      ref.addEventListener("scroll", checkScroll);
      return () => ref.removeEventListener("scroll", checkScroll);
    }
  }, []);

  const scroll = (direction: "left" | "right") => {
    if (scrollRef.current) {
      const scrollAmount = scrollRef.current.clientWidth * 0.8;
      scrollRef.current.scrollBy({
        left: direction === "left" ? -scrollAmount : scrollAmount,
        behavior: "smooth",
      });
    }
  };

  const handleHistoryClick = () => {
    window.location.href = "/@me/content";
  };

  return (
    <div className="relative py-12">
      <h2 
        className="text-3xl font-bold mb-8 text-foreground cursor-pointer hover:text-primary transition-colors"
        onClick={handleHistoryClick}
      >
        Library &#62;
      </h2>
      
      <div
        ref={scrollRef}
        className="flex gap-6 overflow-x-auto pb-6 scrollbar-hide snap-x snap-mandatory"
        style={{ scrollbarWidth: "none", msOverflowStyle: "none" }}
      >
        {cards.map((card) => (
          <div key={card.id} className="w-[85vw] flex-shrink-0 md:w-[45vw] lg:w-[30vw] snap-start">
            <ContentCard card={card} variant="featured" />
          </div>
        ))}
      </div>

      {canScrollLeft && (
        <Button
          variant="secondary"
          size="icon"
          className="absolute -left-4 top-1/2 z-10 hidden h-12 w-12 rounded-full bg-card border border-border md:flex"
          onClick={() => scroll("left")}
          data-testid="button-carousel-left"
        >
          <ChevronLeft className="h-5 w-5" />
        </Button>
      )}

      {canScrollRight && (
        <Button
          variant="secondary"
          size="icon"
          className="absolute -right-4 top-1/2 z-10 hidden h-12 w-12 rounded-full bg-card border border-border md:flex"
          onClick={() => scroll("right")}
          data-testid="button-carousel-right"
        >
          <ChevronRight className="h-5 w-5" />
        </Button>
      )}
    </div>
  );
}import { ArrowUp, Paperclip, Mic, Image as ImageIcon } from "lucide-react";
import { Button } from "@/components/ui/button";
import { promptSuggestions, type PromptSuggestion } from "@/lib/data";
import { useState, useRef } from "react";

function PromptPill({ prompt, onClick }: { prompt: PromptSuggestion; onClick: () => void }) {
  return (
    <Button
      variant="outline"
      size="sm"
      onClick={onClick}
      className="rounded-full text-xs font-normal hover:bg-primary/10 hover:text-primary hover:border-primary/50 transition-colors"
      data-testid={`button-prompt-${prompt.id}`}
    >
      {prompt.text}
    </Button>
  );
}

export function HeroSection() {
  // Extract stats as variables for easy backend integration
  // const documentsProcessed = "10K+";
  // const accuracyRate = "95%";
  // const questionsAnswered = "5M+";

  const [inputValue, setInputValue] = useState("");
  const [isDragging, setIsDragging] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);

  const handlePromptClick = (text: string) => {
    setInputValue(text);
    textareaRef.current?.focus();
  };

  const handleFileSelect = () => {
    fileInputRef.current?.click();
  };

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  };

  const handleDragLeave = () => {
    setIsDragging(false);
  };

  const handleDrop = (e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
    const files = e.dataTransfer.files;
    if (files.length > 0) {
      console.log("Files dropped:", files);
    }
  };

  const handleSubmit = () => {
    if (inputValue.trim()) {
      console.log("Submitting:", inputValue);
    }
  };

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      handleSubmit();
    }
  };

  return (
    <section className="flex min-h-[70vh] flex-col items-center justify-center px-4 py-20">
      {/* Hero Text */}
      <div className="text-center mb-16 max-w-3xl">
        <h1 className="text-5xl md:text-6xl lg:text-7xl font-bold mb-6 text-balance leading-tight">
          Your personalized{" "}
          <span className="text-primary">study buddy</span>
        </h1>
      </div>

      {/* Input Area */}
      <div className="w-full max-w-3xl">
        <div
          className={`relative rounded-lg bg-card border-2 transition-colors ${
            isDragging
              ? "border-primary bg-primary/5"
              : "border-border"
          }`}
          onDragOver={handleDragOver}
          onDragLeave={handleDragLeave}
          onDrop={handleDrop}
        >
          {isDragging && (
            <div className="absolute inset-0 rounded-lg bg-primary/10 flex items-center justify-center z-10">
              <div className="text-center">
                <ImageIcon className="h-12 w-12 mx-auto mb-2 text-primary" />
                <p className="text-sm font-medium text-primary">Drop your files here</p>
              </div>
            </div>
          )}

          <textarea
            ref={textareaRef}
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            onKeyDown={handleKeyDown}
            placeholder="Ask anything or upload a file to get started..."
            className="min-h-[140px] w-full resize-none rounded-lg bg-transparent px-6 py-5 text-base text-foreground placeholder:text-muted-foreground focus-visible:outline-none"
            data-testid="input-chat"
          />

          {/* Action Bar */}
          <div className="border-t border-border px-4 py-3 flex items-center justify-between bg-muted/30 rounded-b-lg">
            <div className="flex items-center gap-2">
              <input
                ref={fileInputRef}
                type="file"
                multiple
                accept=".pdf,.doc,.docx,.txt"
                className="hidden"
                onChange={(e) => console.log("Files selected:", e.target.files)}
              />
              <Button
                variant="ghost"
                size="icon"
                onClick={handleFileSelect}
                className="h-9 w-9 rounded-lg hover:bg-secondary"
                data-testid="button-attach"
              >
                <Paperclip className="h-5 w-5 text-muted-foreground" />
              </Button>
              <Button
                variant="ghost"
                size="icon"
                className="h-9 w-9 rounded-lg hover:bg-secondary"
              >
                <ImageIcon className="h-5 w-5 text-muted-foreground" />
              </Button>
              <Button
                variant="ghost"
                size="icon"
                className="h-9 w-9 rounded-lg hover:bg-secondary"
              >
                <Mic className="h-5 w-5 text-muted-foreground" />
              </Button>
              <div className="hidden md:block ml-2 text-xs text-muted-foreground">
                <kbd className="px-2 py-1 bg-secondary rounded text-xs">⏎</kbd> to send
              </div>
            </div>
            <Button
              size="icon"
              onClick={handleSubmit}
              className="h-10 w-10 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-40"
              disabled={!inputValue.trim()}
              data-testid="button-send"
            >
              <ArrowUp className="h-5 w-5" />
            </Button>
          </div>
        </div>

        {/* Quick Prompts */}
        <div className="mt-8">
          <div className="flex flex-wrap items-center justify-center gap-3">
            <span className="text-sm text-muted-foreground mr-2 hidden sm:inline">
              Try asking:
            </span>
            {promptSuggestions.map((prompt) => (
              <PromptPill
                key={prompt.id}
                prompt={prompt}
                onClick={() => handlePromptClick(prompt.text)}
              />
            ))}
          </div>
        </div>
      </div>

      {/* Stats Section */}
      {/* <div className="mt-16 grid grid-cols-3 gap-8 text-center max-w-2xl w-full">
        <div className="space-y-2">
          <p className="text-3xl font-bold text-primary">{documentsProcessed}</p>
          <p className="text-sm text-muted-foreground">Documents Processed</p>
        </div>
        <div className="space-y-2">
          <p className="text-3xl font-bold text-primary">{accuracyRate}</p>
          <p className="text-sm text-muted-foreground">Accuracy Rate</p>
        </div>
        <div className="space-y-2">
          <p className="text-3xl font-bold text-primary">{questionsAnswered}</p>
          <p className="text-sm text-muted-foreground">Questions Answered</p>
        </div>
      </div> */}
    </section>
  );
}
import { useState } from "react";
import { Send, MessageSquare } from "lucide-react";
interface Message {
  id: number;
  text: string;
  sender: "user" | "bot";
}
interface ChatInterfaceProps {
  title?: string;
  placeholder?: string;
  onSendMessage?: (message: string) => Promise<string> | string;
}
export default function ChatInterface({
  title = "Summary / Notes",
  placeholder = "Ask about the document...",
  onSendMessage,
}: ChatInterfaceProps) {
  const [messages, setMessages] = useState<Message[]>([]);
  const [inputValue, setInputValue] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const handleSendMessage = async () => {
    if (!inputValue.trim() || isLoading) return;
    const userMessage: Message = {
      id: Date.now(),
      text: inputValue,
      sender: "user",
    };
    setMessages((prev) => [...prev, userMessage]);
    const currentInput = inputValue;
    setInputValue("");
    setIsLoading(true);
    try {
      let botResponse: string;
     
      if (onSendMessage) {
        botResponse = await onSendMessage(currentInput);
      } else {
        await new Promise((resolve) => setTimeout(resolve, 500));
        botResponse = "yes true";
      }
      const botMessage: Message = {
        id: Date.now() + 1,
        text: botResponse,
        sender: "bot",
      };
      setMessages((prev) => [...prev, botMessage]);
    } catch (error) {
      const errorMessage: Message = {
        id: Date.now() + 1,
        text: "Sorry, I encountered an error. Please try again.",
        sender: "bot",
      };
      setMessages((prev) => [...prev, errorMessage]);
    } finally {
      setIsLoading(false);
    }
  };
  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      handleSendMessage();
    }
  };
  return (
    <div className="flex flex-col bg-card h-full overflow-hidden">
      {title && (
        <div className="bg-card border-b border-border px-6 py-4 flex-shrink-0">
          <div className="flex items-center gap-2">
            <MessageSquare className="w-5 h-5 text-primary" />
            <h2 className="text-lg font-semibold text-card-foreground">
              {title}
            </h2>
          </div>
        </div>
      )}
      <div className="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide">
        {messages.length === 0 ? (
          <div className="flex flex-col items-center justify-center h-full text-center px-4">
            <MessageSquare className="w-12 h-12 text-muted-foreground/30 mb-3" />
            <p className="text-muted-foreground text-sm">
              Ask questions about the document
            </p>
            <p className="text-muted-foreground/70 text-xs mt-2">
              Try asking for a summary, key points, or specific information
            </p>
          </div>
        ) : (
          messages.map((message) => (
            <div
              key={message.id}
              className={`flex ${
                message.sender === "user" ? "justify-end" : "justify-start"
              }`}
            >
              <div
                className={`max-w-[80%] rounded-lg px-4 py-2 ${
                  message.sender === "user"
                    ? "bg-primary text-primary-foreground"
                    : "bg-muted text-foreground"
                }`}
              >
                <p className="text-sm">{message.text}</p>
              </div>
            </div>
          ))
        )}
        {isLoading && (
          <div className="flex justify-start">
            <div className="bg-muted text-foreground rounded-lg px-4 py-2">
              <p className="text-sm">Thinking...</p>
            </div>
          </div>
        )}
      </div>
      <div className="border-t border-border p-4 bg-card flex-shrink-0">
        <div className="flex gap-2">
          <input
            type="text"
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            onKeyPress={handleKeyPress}
            placeholder={placeholder}
            disabled={isLoading}
            className="flex-1 px-4 py-2 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent disabled:bg-muted disabled:cursor-not-allowed text-foreground placeholder:text-muted-foreground"
          />
          <button
            onClick={handleSendMessage}
            className="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed"
            disabled={!inputValue.trim() || isLoading}
          >
            <Send className="w-5 h-5" />
          </button>
        </div>
      </div>
    </div>
  );
}
import { Search, Sun, Moon, User } from "lucide-react";
import { Button } from "@/components/ui/button";
import { useTheme } from "@/hooks/use-theme";
import { useAuth } from "@/hooks/use-auth";

export function Header() {
  const { theme, toggleTheme } = useTheme();
  const { user, logout } = useAuth();

  return (
    <header className="sticky top-0 z-50 border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="flex h-16 items-center justify-between px-6">
        <div className="flex items-center gap-4">
          <a href="/" className="flex items-center gap-3 group" data-testid="link-home">
            <div 
              className="w-9 h-9 rounded-lg flex items-center justify-center shadow-sm group-hover:shadow-md transition-shadow" 
              style={{ backgroundColor: '#74AF87' }}
            >
              <span className="text-white font-bold text-xl">P</span>
            </div>
            <h1 className="text-2xl font-semibold tracking-tight">Padh.ai</h1>
          </a>
        </div>

        <div className="flex items-center gap-2">
          <Button
            variant="ghost"
            size="icon"
            className="hover:bg-secondary"
            data-testid="button-search"
            aria-label="Search"
          >
            <Search className="h-5 w-5" />
          </Button>

          <Button
            variant="ghost"
            size="icon"
            onClick={toggleTheme}
            className="hover:bg-secondary"
            data-testid="button-theme-toggle"
            aria-label={`Switch to ${theme === "light" ? "dark" : "light"} mode`}
          >
            {theme === "light" ? <Moon className="h-5 w-5" /> : <Sun className="h-5 w-5" />}
          </Button>

          {user ? (
            <div className="flex items-center gap-3">
              <div className="flex items-center gap-2 px-3 py-1.5 rounded-md bg-secondary/50 border border-border">
                <User className="h-4 w-4 text-muted-foreground" />
                <span className="text-sm font-medium">{user.name}</span>
              </div>
              <Button
                variant="ghost"
                size="sm"
                onClick={logout}
                className="hover:bg-secondary"
                data-testid="button-logout"
              >
                Logout
              </Button>
            </div>
          ) : (
            <Button
              variant="ghost"
              size="sm"
              asChild
              className="hover:bg-secondary"
              data-testid="button-login"
            >
              <a href="/login">Login</a>
            </Button>
          )}
        </div>
      </div>
    </header>
  );
}import { useModeSidebar } from "@/hooks/use-mode-sidebar";
import { ModenavigationData, type NavItem } from "@/lib/data";
import { Link, useLocation } from "wouter";
function NavItemComponent({ item, onClick }: { item: NavItem; onClick?: () => void }) {
const [location] = useLocation();
const isActive = location === item.href;
return (
<Link href={item.href} onClick={onClick}>
<span
className={`block py-2.5 px-3 text-sm font-medium rounded-lg transition-all ${
isActive
            ? "bg-primary/10 text-primary border-l-2 border-primary"
            : "text-muted-foreground hover:text-foreground hover:bg-secondary"
}`}
data-testid={`link-nav-${item.id}`}
>
{item.label}
</span>
</Link>
  );
}
export function ModeSidebar() {
const { isOpen, setIsOpen } = useModeSidebar();
const handleNavClick = () => {
setIsOpen(false); // Close after selecting a mode
  };
return (
<>
{isOpen && (
<div
className="fixed inset-0 z-50 bg-background/90 backdrop-blur-sm"
onClick={() => setIsOpen(false)}
data-testid="mode-sidebar-overlay"
/>
      )}
<aside
className={`fixed left-0 top-16 z-50 h-[calc(100vh-4rem)] w-64 transform bg-background/50 border-r border-border/40 transition-all duration-300 ease-in-out ${
isOpen ? "translate-x-0" : "-translate-x-full"
}`}
data-testid="mode-sidebar"
>
<div className="flex h-full flex-col p-4">
<div className="flex-1 overflow-y-auto scrollbar-hide">
<nav className="space-y-1">
{ModenavigationData.map((section) =>
section.items.map((item) => (
<NavItemComponent key={item.id} item={item} onClick={handleNavClick} />
                ))
              )}
</nav>
</div>
<div className="pt-4">
{/* <Button
variant="ghost"
className="w-full justify-start text-gray-400 hover:text-[#74AF87] hover:drop-shadow-[0_0_6px_rgba(255,255,255,0.8)] transition "
data-testid="button-mode-toggle"
onClick={() => setIsOpen(false)}
>
<svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12.3393C1.58579 12.3393 1.25 12.0035 1.25 11.5893L1.25 6.48933C1.25 4.55633 2.817 2.98933 4.75 2.98933L6.75 2.98933V1.97671C6.75 1.53439 7.2821 1.30991 7.59892 1.61858L9.38241 3.3562C9.58386 3.55246 9.58386 3.8762 9.38242 4.07246L7.59892 5.81008C7.2821 6.11875 6.75 5.89427 6.75 5.45196V4.48933L4.75 4.48933C3.64543 4.48933 2.75 5.38476 2.75 6.48933L2.75 11.5893C2.75 12.0035 2.41421 12.3393 2 12.3393ZM14 3.66067C14.4142 3.66067 14.75 3.99646 14.75 4.41067V9.51066C14.75 11.4437 13.183 13.0107 11.25 13.0107H9.25001V14.0233C9.25001 14.4656 8.7179 14.6901 8.40109 14.3814L6.61759 12.6438C6.41615 12.4475 6.41615 12.1238 6.61759 11.9275L8.40109 10.1899C8.7179 9.88124 9.25001 10.1057 9.25001 10.548V11.5107H11.25C12.3546 11.5107 13.25 10.6152 13.25 9.51066V4.41067C13.25 3.99646 13.5858 3.66067 14 3.66067Z" fill="currentColor"></path></svg>
</Button> */}
</div>
</div>
</aside>
</>
  );
}
export default ModeSidebar;
import { Question } from "@/lib/data";
interface QuestionCardProps {
  data: Question;
  onAnswer: (optionIndex: number) => void;
  showFeedback: boolean;
  selected: number | null;
  current: number;
  total: number;
}
const QuestionCard: React.FC<QuestionCardProps> = ({
  data,
  onAnswer,
  showFeedback,
  selected,
  current,
  total,
}) => {
  const { question, options, correctIndex } = data;
  const getButtonStyle = (optionIndex: number) => {
    if (!showFeedback) {
      return "bg-card border-2 border-border hover:border-accent/30 hover:bg-card/80 text-foreground";
    }
    if (optionIndex === correctIndex) {
      return "bg-accent/10 border-2 border-accent text-foreground font-medium";
    }
    if (optionIndex === selected) {
      return "bg-card border-2 border-muted-foreground/40 text-muted-foreground";
    }
    return "bg-card border-2 border-border/50 text-muted-foreground/60";
  };
  return (
    <div className="bg-card p-8 rounded-lg w-full max-w-2xl border border-border/50">
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-sm font-medium text-muted-foreground uppercase tracking-wide">
          Question {current + 1} of {total}
        </h2>
        <span className="text-xs text-muted-foreground">
          {selected !== null
            ? Math.round(((current + 1) / total) * 100) + "% complete"
            : Math.round((current / total) * 100) + "% complete"}
        </span>
      </div>
      <p className="text-2xl font-medium mb-8 text-foreground leading-relaxed">{question}</p>
      <div className="grid gap-3">
        {options.map((option, index) => (
          <button
            className={`${getButtonStyle(
              index
            )} text-left px-5 py-4 rounded-md transition-all duration-200`}
            key={index}
            onClick={() => onAnswer(index)}
            disabled={showFeedback}
          >
            <span className="flex items-center gap-3">
              <span className="text-sm font-medium text-muted-foreground">
                {String.fromCharCode(65 + index)}.
              </span>
              <span>{option}</span>
            </span>
          </button>
        ))}
      </div>
     
      {showFeedback && (
        <div className="mt-6 pt-6 border-t border-border/30">
          {selected === correctIndex ? (
            <p className="text-sm text-accent flex items-center gap-2">
              <span className="text-base">✓</span> Correct answer
            </p>
          ) : (
            <p className="text-sm text-muted-foreground">
              Correct answer: <span className="text-foreground font-medium">{options[correctIndex]}</span>
            </p>
          )}
        </div>
      )}
    </div>
  );
};
export default QuestionCard;
/*
import { Button } from "@/components/ui/button";
import { useSidebar } from "@/hooks/use-sidebar";
import { navigationData, type NavItem } from "@/lib/data";
import { Link, useLocation } from "wouter";
import { useModeSidebar } from "@/hooks/use-mode-sidebar.tsx";
function NavItemComponent({ item, onClick }: { item: NavItem; onClick?: () => void }) {
  const [location] = useLocation();
  const isActive = location === item.href;
 
  return (
    <Link href={item.href} onClick={onClick}>
      <span
        className={`block py-2.5 px-3 text-sm font-medium rounded-lg transition-all ${
          isActive
            ? "bg-primary/10 text-primary border-l-2 border-primary"
            : "text-muted-foreground hover:text-foreground hover:bg-secondary"
        }`}
        data-testid={`link-nav-${item.id}`}
      >
        {item.label}
      </span>
    </Link>
  );
}
export function Sidebar() {
  const { isOpen, isCollapsed, setIsOpen } = useSidebar();
  const { toggle: toggleMode } = useModeSidebar();
  const handleNavClick = () => {
    if (window.innerWidth < 768) {
      setIsOpen(false);
    }
  };
 
  return (
    <>
      {isOpen && (
        <div
          className="fixed inset-0 z-40 bg-background/80 backdrop-blur-sm md:hidden"
          onClick={() => setIsOpen(false)}
          data-testid="sidebar-overlay"
        />
      )}
     
      <aside
        className={`fixed left-0 top-16 z-40 h-[calc(100vh-4rem)] w-64 transform bg-background border-r border-border/40 transition-all duration-300 ease-in-out md:sticky md:top-16 ${
          isOpen ? "translate-x-0" : "-translate-x-full md:translate-x-0"
        } ${isCollapsed ? "md:w-0 md:overflow-hidden md:opacity-0" : "md:w-64 md:opacity-100"}`}
        data-testid="sidebar"
      >
        <div className="flex h-full flex-col p-4">
          <div className="flex-1 overflow-y-auto scrollbar-hide">
            <nav className="space-y-1">
              {navigationData.map((section) =>
                section.items.map((item) => (
                  <NavItemComponent key={item.id} item={item} onClick={handleNavClick} />
                ))
              )}
            </nav>
          </div>
                <div className="pt-4 border-t border-border/40">
          <Button
          variant="ghost"
          className="w-full justify-start text-gray-400 hover:text-[#74AF87] hover:drop-shadow-[0_0_6px_rgba(255,255,255,0.8)] transition"
          data-testid="button-menu-toggle"
          onClick={toggleMode}
              >
              <svg><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12.3393C1.58579 12.3393 1.25 12.0035 1.25 11.5893L1.25 6.48933C1.25 4.55633 2.817 2.98933 4.75 2.98933L6.75 2.98933V1.97671C6.75 1.53439 7.2821 1.30991 7.59892 1.61858L9.38241 3.3562C9.58386 3.55246 9.58386 3.8762 9.38242 4.07246L7.59892 5.81008C7.2821 6.11875 6.75 5.89427 6.75 5.45196V4.48933L4.75 4.48933C3.64543 4.48933 2.75 5.38476 2.75 6.48933L2.75 11.5893C2.75 12.0035 2.41421 12.3393 2 12.3393ZM14 3.66067C14.4142 3.66067 14.75 3.99646 14.75 4.41067V9.51066C14.75 11.4437 13.183 13.0107 11.25 13.0107H9.25001V14.0233C9.25001 14.4656 8.7179 14.6901 8.40109 14.3814L6.61759 12.6438C6.41615 12.4475 6.41615 12.1238 6.61759 11.9275L8.40109 10.1899C8.7179 9.88124 9.25001 10.1057 9.25001 10.548V11.5107H11.25C12.3546 11.5107 13.25 10.6152 13.25 9.51066V4.41067C13.25 3.99646 13.5858 3.66067 14 3.66067Z" fill="currentColor"></path></svg>
      </Button>
    </div>
        </div>
      </aside>
    </>
  );
}
*/
export {}
import { Button } from "@/components/ui/button";
import { useModeSidebar } from "@/hooks/use-mode-sidebar";
export function ToggleModeButton() {
  const { toggle: toggleMode } = useModeSidebar();
  return (
    <div className="fixed bottom-4 left-4 z-50">
      <Button
        variant="ghost"
        className="w-full justify-start text-gray-400 hover:text-[#74AF87] hover:drop-shadow-[0_0_6px_rgba(255,255,255,0.8)] transition"
        data-testid="button-menu-toggle"
        onClick={toggleMode}
      >
        <svg>
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2 12.3393C1.58579 12.3393 1.25 12.0035 1.25 11.5893L1.25 6.48933C1.25 4.55633 2.817 2.98933 4.75 2.98933L6.75 2.98933V1.97671C6.75 1.53439 7.2821 1.30991 7.59892 1.61858L9.38241 3.3562C9.58386 3.55246 9.58386 3.8762 9.38242 4.07246L7.59892 5.81008C7.2821 6.11875 6.75 5.89427 6.75 5.45196V4.48933L4.75 4.48933C3.64543 4.48933 2.75 5.38476 2.75 6.48933L2.75 11.5893C2.75 12.0035 2.41421 12.3393 2 12.3393ZM14 3.66067C14.4142 3.66067 14.75 3.99646 14.75 4.41067V9.51066C14.75 11.4437 13.183 13.0107 11.25 13.0107H9.25001V14.0233C9.25001 14.4656 8.7179 14.6901 8.40109 14.3814L6.61759 12.6438C6.41615 12.4475 6.41615 12.1238 6.61759 11.9275L8.40109 10.1899C8.7179 9.88124 9.25001 10.1057 9.25001 10.548V11.5107H11.25C12.3546 11.5107 13.25 10.6152 13.25 9.51066V4.41067C13.25 3.99646 13.5858 3.66067 14 3.66067Z"
            fill="currentColor"
          />
        </svg>
      </Button>
    </div>
  );
}
import React, { createContext, useContext, useState, useEffect } from 'react';

interface AuthContextType {
  user: { name: string; email: string } | null;
  loading: boolean;
  login: (email: string, password: string) => Promise<boolean>;
  signup: (name: string, email: string, password: string) => Promise<boolean>;
  logout: () => void;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [user, setUser] = useState<{ name: string; email: string } | null>(null);
  const [loading, setLoading] = useState<boolean>(true);

  useEffect(() => {
    const storedUser = localStorage.getItem('user');
    if (storedUser) {
      setUser(JSON.parse(storedUser));
    }
    setLoading(false);
  }, []);

  const login = async (email: string, password: string): Promise<boolean> => {
    setLoading(true);
    try {
      const response = await fetch('http://localhost:3000/api/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ email, password }),
      });

      if (response.ok) {
        const userData = await response.json();
        setUser(userData);
        localStorage.setItem('user', JSON.stringify(userData));
        return true;
      } else {
        const errorData = await response.json();
        console.error('Login failed:', errorData.message);
        return false;
      }
    } catch (error) {
      console.error('Network error during login:', error);
      return false;
    } finally {
      setLoading(false);
    }
  };

  const signup = async (name: string, email: string, password: string): Promise<boolean> => {
    setLoading(true);
    try {
      const response = await fetch('http://localhost:3000/api/signup', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, email, password }),
      });

      if (response.ok) {
        const userData = await response.json();
        setUser(userData);
        localStorage.setItem('user', JSON.stringify(userData));
        return true;
      } else {
        const errorData = await response.json();
        console.error('Signup failed:', errorData.message);
        return false;
      }
    } catch (error) {
      console.error('Network error during signup:', error);
      return false;
    } finally {
      setLoading(false);
    }
  };

  const logout = () => {
    setUser(null);
    localStorage.removeItem('user');
  };

  return (
    <AuthContext.Provider value={{ user, loading, login, signup, logout }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
import { createContext, useContext, useState, useEffect } from "react";
interface ModeSidebarContextType {
  isOpen: boolean;
  isMobile: boolean;
  setIsOpen: (open: boolean) => void;
  toggle: () => void;
}
const ModeSidebarContext = createContext<ModeSidebarContextType | undefined>(undefined);
export function ModeSidebarProvider({ children }: { children: React.ReactNode }) {
  const [isOpen, setIsOpen] = useState(false);
  const [isMobile, setIsMobile] = useState(false);
  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "";
    }
    return () => {
      document.body.style.overflow = "";
    };
  }, [isOpen]);
  const toggle = () => setIsOpen((prev) => !prev);
  return (
    <ModeSidebarContext.Provider value={{ isOpen, isMobile, setIsOpen, toggle }}>
      {children}
    </ModeSidebarContext.Provider>
  );
}
export function useModeSidebar() {
  const context = useContext(ModeSidebarContext);
  if (context === undefined) {
    throw new Error("useModeSidebar must be used within a ModeSidebarProvider");
  }
  return context;
}
import * as React from 'react';

const MOBILE_BREAKPOINT = 768;

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined);

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    };
    mql.addEventListener('change', onChange);
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    return () => mql.removeEventListener('change', onChange);
  }, []);

  return !!isMobile;
}
/*
import { createContext, useContext, useState, useEffect } from "react";
interface SidebarContextType {
  isOpen: boolean;
  isCollapsed: boolean;
  isMobile: boolean;
  setIsOpen: (open: boolean) => void;
  setIsCollapsed: (collapsed: boolean) => void;
  toggle: () => void;
  toggleCollapse: () => void;
}
const SidebarContext = createContext<SidebarContextType | undefined>(undefined);
export function SidebarProvider({ children }: { children: React.ReactNode }) {
  const [isOpen, setIsOpen] = useState(false);
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [isMobile, setIsMobile] = useState(false);
  useEffect(() => {
    const checkMobile = () => {
      const mobile = window.innerWidth < 768;
      setIsMobile(mobile);
     
      // Auto-collapse on desktop, auto-close on mobile
      if (!mobile && isOpen) {
        setIsOpen(false);
      }
    };
   
    checkMobile();
    window.addEventListener("resize", checkMobile);
   
    return () => window.removeEventListener("resize", checkMobile);
  }, [isOpen]);
  useEffect(() => {
    // Handle body scroll lock when mobile sidebar is open
    if (isMobile && isOpen) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "";
    }
   
    return () => {
      document.body.style.overflow = "";
    };
  }, [isMobile, isOpen]);
  const toggle = () => {
    if (isMobile) {
      setIsOpen((prev) => !prev);
    } else {
      setIsCollapsed((prev) => !prev);
    }
  };
  const toggleCollapse = () => {
    setIsCollapsed((prev) => !prev);
  };
  return (
    <SidebarContext.Provider
      value={{
        isOpen,
        isCollapsed,
        isMobile,
        setIsOpen,
        setIsCollapsed,
        toggle,
        toggleCollapse,
      }}
    >
      {children}
    </SidebarContext.Provider>
  );
}
export function useSidebar() {
  const context = useContext(SidebarContext);
  if (context === undefined) {
    throw new Error("useSidebar must be used within a SidebarProvider");
  }
  return context;
}
*/
export {}
import { createContext, useContext, useEffect, useState } from "react";
type Theme = "light" | "dark" | "system";
interface ThemeContextType {
  theme: Theme;
  actualTheme: "light" | "dark";
  setTheme: (theme: Theme) => void;
  toggleTheme: () => void;
}
const ThemeContext = createContext<ThemeContextType | undefined>(undefined);
export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState<Theme>(() => {
    if (typeof window !== "undefined") {
      const stored = localStorage.getItem("theme") as Theme | null;
      return stored || "system";
    }
    return "system";
  });
  const [actualTheme, setActualTheme] = useState<"light" | "dark">("light");
  useEffect(() => {
    const root = document.documentElement;
   
    const updateTheme = () => {
      let resolvedTheme: "light" | "dark";
     
      if (theme === "system") {
        resolvedTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      } else {
        resolvedTheme = theme;
      }
     
      root.classList.remove("light", "dark");
      root.classList.add(resolvedTheme);
      setActualTheme(resolvedTheme);
      localStorage.setItem("theme", theme);
    };
    updateTheme();
    // Listen for system theme changes
    const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
    const handleChange = () => {
      if (theme === "system") {
        updateTheme();
      }
    };
    mediaQuery.addEventListener("change", handleChange);
    return () => mediaQuery.removeEventListener("change", handleChange);
  }, [theme]);
  const toggleTheme = () => {
    setTheme((prev) => {
      if (prev === "light") return "dark";
      if (prev === "dark") return "system";
      return "light";
    });
  };
  return (
    <ThemeContext.Provider value={{ theme, actualTheme, setTheme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}
export function useTheme() {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error("useTheme must be used within a ThemeProvider");
  }
  return context;
}
import * as React from 'react';

import type { ToastActionElement, ToastProps } from '@/components/ui/toast';

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: 'ADD_TOAST',
  UPDATE_TOAST: 'UPDATE_TOAST',
  DISMISS_TOAST: 'DISMISS_TOAST',
  REMOVE_TOAST: 'REMOVE_TOAST',
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType['ADD_TOAST'];
      toast: ToasterToast;
    }
  | {
      type: ActionType['UPDATE_TOAST'];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType['DISMISS_TOAST'];
      toastId?: ToasterToast['id'];
    }
  | {
      type: ActionType['REMOVE_TOAST'];
      toastId?: ToasterToast['id'];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: 'REMOVE_TOAST',
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case 'ADD_TOAST':
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case 'UPDATE_TOAST':
      return {
        ...state,
        toasts: state.toasts.map((t) => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),
      };

    case 'DISMISS_TOAST': {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      };
    }
    case 'REMOVE_TOAST':
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, 'id'>;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: ToasterToast) =>
    dispatch({
      type: 'UPDATE_TOAST',
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });

  dispatch({
    type: 'ADD_TOAST',
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),
  };
}

export { useToast, toast };
import * as React from "react";
import type { ToastActionElement, ToastProps } from "@/components/ui/toast";
const TOAST_LIMIT = 3;
const TOAST_REMOVE_DELAY = 5000;
type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};
const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const;
let count = 0;
function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}
type ActionType = typeof actionTypes;
type Action =
  | { type: ActionType["ADD_TOAST"]; toast: ToasterToast }
  | { type: ActionType["UPDATE_TOAST"]; toast: Partial<ToasterToast> }
  | { type: ActionType["DISMISS_TOAST"]; toastId?: ToasterToast["id"] }
  | { type: ActionType["REMOVE_TOAST"]; toastId?: ToasterToast["id"] };
interface State {
  toasts: ToasterToast[];
}
const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();
const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }
  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);
  toastTimeouts.set(toastId, timeout);
};
export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };
    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      };
    case "DISMISS_TOAST": {
      const { toastId } = action;
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? { ...t, open: false }
            : t
        ),
      };
    }
   
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};
const listeners: Array<(state: State) => void> = [];
let memoryState: State = { toasts: [] };
function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}
type Toast = Omit<ToasterToast, "id">;
function toast({ ...props }: Toast) {
  const id = genId();
  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    });
   
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });
  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });
  return {
    id: id,
    dismiss,
    update,
  };
}
function useToast() {
  const [state, setState] = React.useState<State>(memoryState);
  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);
  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  };
}
export { useToast, toast };
import { BookOpen, ChevronRight } from "lucide-react";
import { Link } from "wouter";
import { Card } from "@/components/ui/card";
import { ProgressRing } from "@/components/ui/ProgressRing";
import { Badge } from "@/components/ui/badge";
import { cn } from "@/lib/utils";

interface CourseCardProps {
  id: string;
  title: string;
  chapters: number;
  completedChapters: number;
  subject?: string;
  className?: string;
}

export function CourseCard({
  id,
  title,
  chapters,
  completedChapters,
  subject,
  className,
}: CourseCardProps) {
  const progress = chapters > 0 ? (completedChapters / chapters) * 100 : 0;

  return (
    <Link to={`/@me/content/${id}`}>
      <Card
        className={cn(
          "group p-6 bg-card border-border rounded-xl transition-all duration-200",
          "hover:shadow-md hover:scale-[1.02] cursor-pointer",
          className
        )}
      >
        <div className="flex items-start gap-4">
          <div className="p-3 rounded-lg bg-primary/10">
            <BookOpen className="w-6 h-6 text-primary" />
          </div>
          <div className="flex-1 min-w-0">
            <h3 className="font-serif font-semibold text-lg text-card-foreground truncate">
              {title}
            </h3>
            {subject && (
              <Badge variant="secondary" className="mt-1 text-xs">
                {subject}
              </Badge>
            )}
            <p className="text-sm text-muted-foreground mt-2">
              {completedChapters} of {chapters} chapters
            </p>
          </div>
          <div className="flex items-center gap-3">
            <ProgressRing progress={progress} size={44} strokeWidth={3} />
            <ChevronRight className="w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors" />
          </div>
        </div>
      </Card>
    </Link>
  );
}
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Progress } from '@/components/ui/progress';
import { Badge } from '@/components/ui/badge';
import { BookOpen, CheckCircle2 } from 'lucide-react';

interface ContentCardProps {
  card: {
    id: string;
    title: string;
    description: string;
    progress: number;
    topics: number;
    image?: string;
  };
  variant?: 'default' | 'featured';
  className?: string;
}

export function ContentCard({ card, variant = 'default', className = '' }: ContentCardProps) {
  return (
    <div className={className}>
      <Card className="overflow-hidden group cursor-pointer border-2 border-transparent hover:border-primary/50 transition-colors">
        {/* Image section */}
        {card.image && (
          <div className="relative h-40 overflow-hidden">
            <img
              src={card.image}
              alt={card.title}
              className="w-full h-full object-cover"
            />
            <div className="absolute inset-0 bg-gradient-to-t from-card to-transparent" />
            {card.progress === 100 && (
              <div className="absolute top-4 right-4">
                <CheckCircle2 className="w-8 h-8 text-primary" />
              </div>
            )}
          </div>
        )}

        <CardHeader>
          <div className="flex items-start justify-between gap-2">
            <CardTitle className="group-hover:text-primary transition-colors">
              {card.title}
            </CardTitle>
            <Badge 
              variant="secondary" 
              className="bg-primary/10 text-primary border-primary/20"
            >
              <BookOpen className="w-3 h-3 mr-1" />
              {card.topics}
            </Badge>
          </div>
          <CardDescription className="mt-2">{card.description}</CardDescription>
        </CardHeader>

        <CardContent>
          <div className="space-y-2">
            <div className="flex justify-between items-center">
              <span className="text-sm text-muted-foreground">Progress</span>
              <span className="text-sm font-bold text-primary">
                {card.progress}%
              </span>
            </div>
            <Progress 
              value={card.progress} 
              className="h-2 bg-muted"
            />
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
import { LucideIcon } from "lucide-react";
import { Link } from "wouter";
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { cn } from "@/lib/utils";

interface StudyToolCardProps {
  title: string;
  description: string;
  icon: LucideIcon;
  count?: number;
  countLabel?: string;
  href: string;
  variant?: "default" | "primary" | "success";
  className?: string;
}

export function StudyToolCard({
  title,
  description,
  icon: Icon,
  count,
  countLabel,
  href,
  variant = "default",
  className,
}: StudyToolCardProps) {
  const iconBgClasses = {
    default: "bg-muted",
    primary: "bg-primary/10",
    success: "bg-success/10",
  };

  const iconClasses = {
    default: "text-muted-foreground",
    primary: "text-primary",
    success: "text-success",
  };

  return (
    <Card
      className={cn(
        "p-6 bg-card border-border rounded-xl transition-all duration-200",
        "hover:shadow-md",
        className
      )}
    >
      <div className="flex items-start gap-4">
        <div className={cn("p-3 rounded-lg", iconBgClasses[variant])}>
          <Icon className={cn("w-6 h-6", iconClasses[variant])} />
        </div>
        <div className="flex-1">
          <div className="flex items-center gap-2">
            <h3 className="font-sans font-semibold text-card-foreground">
              {title}
            </h3>
            {count !== undefined && (
              <Badge variant="secondary" className="text-xs">
                {count} {countLabel}
              </Badge>
            )}
          </div>
          <p className="text-sm text-muted-foreground mt-1">{description}</p>
          <Button asChild variant="ghost" className="px-0 mt-2 text-primary">
            <Link to={href}>Open →</Link>
          </Button>
        </div>
      </div>
    </Card>
  );
}
import { useParams } from 'react-router-dom';
import { useLocation } from 'wouter';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Progress } from '@/components/ui/progress';
import { Badge } from '@/components/ui/badge';
import {
  ArrowLeft,
  CheckCircle2,
  Circle,
  Sparkles,
  Zap,
  BookOpen,
  Edit3,
  FlipHorizontal,
  Network,
  ClipboardList,
  FileText
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';

const mockCourse = {
  id: '1',
  title: 'Quantum Physics',
  description: 'Explore the fascinating world of quantum mechanics and unlock the secrets of the universe',
  progress: 75,
  topics: 12,
  image: 'https://images.unsplash.com/photo-1765207633730-001e54ec6aba?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxxdWFudHVtJTIwcGh5c2ljcyUyMHBhcnRpY2xlc3xlbnwxfHx8fDE3NjU3NDEzMDB8MA&ixlib=rb-4.1.0&q=80&w=1080'
};

const learningPath = [
  { id: 1, title: 'Wave-Particle Duality', completed: true },
  { id: 2, title: 'Schrödinger Equation', completed: true },
  { id: 3, title: 'Quantum Entanglement', completed: true },
  { id: 4, title: 'Heisenberg Uncertainty', completed: false },
  { id: 5, title: 'Quantum Tunneling', completed: false },
  { id: 6, title: 'Quantum Computing', completed: false },
];

const recentActivities = [
  { id: 1, type: 'notes', title: 'Wave Functions', time: '2 hours ago', icon: Edit3 },
  { id: 2, type: 'flashcards', title: 'Quantum States', time: '5 hours ago', icon: FlipHorizontal },
  { id: 3, type: 'test', title: 'Chapter 3 Quiz', score: 85, time: 'Yesterday', icon: ClipboardList },
];

const artifacts = [
  { id: 1, type: 'notes', count: 24, icon: Edit3, route: '/notes' },
  { id: 2, type: 'flashcards', count: 156, icon: FlipHorizontal, route: '/flashcards' },
  { id: 3, type: 'mindmaps', count: 8, icon: Network, route: '/mindmaps' },
  { id: 4, type: 'tests', count: 12, icon: ClipboardList, route: '/tests' },
];

export default function CoursePage() {
  const { courseId } = useParams();
  const [, navigate] = useLocation();

  return (
    <div className="min-h-screen">
      {/* Hero Section */}
      <div className="relative border-b bg-card">
        <div className="relative z-10 max-w-7xl mx-auto px-8 py-12">
          {/* Breadcrumb */}
          <div className="mb-6">
            <Breadcrumb>
              <BreadcrumbList>
                <BreadcrumbItem>
                  <BreadcrumbLink
                    onClick={() => navigate('/@me/content')}
                    className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors"
                  >
                    <ArrowLeft className="w-4 h-4" />
                    Library
                  </BreadcrumbLink>
                </BreadcrumbItem>
                <BreadcrumbSeparator />
                <BreadcrumbItem>
                  <BreadcrumbLink className="text-primary">
                    {mockCourse.title}
                  </BreadcrumbLink>
                </BreadcrumbItem>
              </BreadcrumbList>
            </Breadcrumb>
          </div>

          {/* Title */}
          <h1 className="text-5xl font-bold mb-4">
            {mockCourse.title}
          </h1>

          <p className="text-xl text-muted-foreground mb-8 max-w-2xl">
            {mockCourse.description}
          </p>

          {/* Progress */}
          <div className="border rounded-lg p-6 max-w-md bg-background">
            <div className="flex justify-between items-center mb-3">
              <span className="text-sm text-muted-foreground">Course Progress</span>
              <span className="text-2xl font-bold text-primary">
                {mockCourse.progress}%
              </span>
            </div>
            <Progress value={mockCourse.progress} className="h-2" />
            {mockCourse.progress === 100 && (
              <div className="mt-4 text-center">
                <span className="text-primary">Course Completed</span>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-8 py-12 space-y-12">
        {/* Learning Path */}
        <section>
          <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
            <Sparkles className="w-8 h-8 text-primary" />
            Learning Path
          </h2>

          <div className="space-y-4">
            {learningPath.map((topic) => (
              <div
                key={topic.id}
                className="flex items-center gap-4 group cursor-pointer"
              >
                <div
                  className={`w-12 h-12 rounded-full flex items-center justify-center border-2 ${
                    topic.completed
                      ? 'bg-primary border-primary'
                      : 'border-border bg-background'
                  }`}
                >
                  {topic.completed ? (
                    <CheckCircle2 className="w-6 h-6 text-primary-foreground" />
                  ) : (
                    <Circle className="w-6 h-6 text-muted-foreground" />
                  )}
                </div>

                <Card className={`flex-1 ${topic.completed ? 'border-primary/50' : ''}`}>
                  <CardContent className="py-4 flex items-center justify-between">
                    <div>
                      <h3 className="font-semibold">{topic.title}</h3>
                      <p className="text-sm text-muted-foreground">
                        {topic.completed ? 'Completed' : 'Not started'}
                      </p>
                    </div>
                    {!topic.completed && (
                      <Button size="sm">
                        <Zap className="w-4 h-4 mr-2" />
                        Start
                      </Button>
                    )}
                  </CardContent>
                </Card>
              </div>
            ))}
          </div>
        </section>

        {/* Recent Activity */}
        <section>
          <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
            <BookOpen className="w-8 h-8 text-primary" />
            Recent Activity
          </h2>

          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {recentActivities.map((activity) => (
              <Card key={activity.id} className="cursor-pointer border-2 hover:border-primary transition-colors">
                <CardHeader>
                  <div className="flex items-center gap-3 mb-2">
                    <div className="w-12 h-12 rounded-full border-2 border-primary/20 bg-primary/5 flex items-center justify-center">
                      <activity.icon className="w-6 h-6 text-primary" />
                    </div>
                    <div className="flex-1">
                      <CardTitle className="text-lg">{activity.title}</CardTitle>
                      <p className="text-sm text-muted-foreground">{activity.time}</p>
                    </div>
                  </div>
                </CardHeader>
                {activity.score !== undefined && (
                  <CardContent>
                    <Badge variant="secondary">
                      Score: {activity.score}%
                    </Badge>
                  </CardContent>
                )}
              </Card>
            ))}
          </div>
        </section>

        {/* Study Artifacts */}
        <section>
          <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
            <FileText className="w-8 h-8 text-primary" />
            Study Artifacts
          </h2>

          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {artifacts.map((artifact) => (
              <div
                key={artifact.id}
                className="cursor-pointer"
                onClick={() => navigate(`/@me/content/${courseId}${artifact.route}`)}
              >
                <Card className="h-full border-2 hover:border-primary transition-colors bg-card">
                  <CardContent className="p-6 text-center">
                    <artifact.icon className="w-16 h-16 mx-auto mb-4 text-primary" />
                    <div className="text-4xl font-bold text-primary mb-2">
                      {artifact.count}
                    </div>
                    <p className="text-muted-foreground capitalize">{artifact.type}</p>
                  </CardContent>
                </Card>
              </div>
            ))}
          </div>
        </section>
      </div>
    </div>
  );
}
import { useState } from 'react';
import { useParams } from 'react-router-dom';
import { useLocation } from 'wouter';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { 
  ArrowLeft, 
  RotateCcw, 
  Check, 
  X,
  Star,
  Flame,
  Brain,
  Sparkles
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';

const mockDecks = [
  { id: 1, name: 'Wave-Particle Duality', cards: 24, mastered: 18 },
  { id: 2, name: 'Quantum States', cards: 32, mastered: 12 },
  { id: 3, name: 'Schrödinger Equation', cards: 28, mastered: 20 },
];

const mockCards = [
  { 
    id: 1, 
    front: 'What is the Heisenberg Uncertainty Principle?', 
    back: 'The principle states that you cannot simultaneously know the exact position and momentum of a particle with absolute precision.' 
  },
  { 
    id: 2, 
    front: 'Define Wave-Particle Duality', 
    back: 'Wave-particle duality is the concept that every particle or quantum entity exhibits both wave and particle properties.' 
  },
  { 
    id: 3, 
    front: 'What is Quantum Entanglement?', 
    back: 'Quantum entanglement is a phenomenon where particles become interconnected such that the state of one instantly influences the state of another, regardless of distance.' 
  },
  { 
    id: 4, 
    front: 'What is the Schrödinger Equation?', 
    back: 'The Schrödinger equation is a mathematical equation that describes how the quantum state of a physical system changes over time.' 
  },
];

export default function Flashcards() {
  const { courseId } = useParams();
  const [, navigate] = useLocation();
  const [selectedDeck, setSelectedDeck] = useState<number | null>(null);
  const [currentCardIndex, setCurrentCardIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [streak, setStreak] = useState(7);
  const [cardsReviewed, setCardsReviewed] = useState(0);

  const handleRate = (rating: 'easy' | 'hard') => {
    setCardsReviewed(prev => prev + 1);
    if (rating === 'easy') {
      setStreak(prev => prev + 1);
    }
    
    // Move to next card
    setTimeout(() => {
      setIsFlipped(false);
      if (currentCardIndex < mockCards.length - 1) {
        setCurrentCardIndex(prev => prev + 1);
      } else {
        setCurrentCardIndex(0);
      }
    }, 300);
  };

  const currentCard = mockCards[currentCardIndex];

  if (!selectedDeck) {
    return (
      <div className="min-h-screen">
        {/* Header */}
        <div className="border-b">
          <div className="max-w-7xl mx-auto px-8 py-4">
            <Breadcrumb>
              <BreadcrumbList>
                <BreadcrumbItem>
                  <BreadcrumbLink 
                    onClick={() => navigate('/@me/content')}
                    className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors group"
                  >
                    <ArrowLeft className="w-4 h-4" />
                    Library
                  </BreadcrumbLink>
                </BreadcrumbItem>
                <BreadcrumbSeparator />
                <BreadcrumbItem>
                  <BreadcrumbLink 
                    onClick={() => navigate(`/@me/content/${courseId}`)}
                    className="cursor-pointer hover:text-primary transition-colors"
                  >
                    Quantum Physics
                  </BreadcrumbLink>
                </BreadcrumbItem>
                <BreadcrumbSeparator />
                <BreadcrumbItem>
                  <BreadcrumbLink className="text-primary">Flashcards</BreadcrumbLink>
                </BreadcrumbItem>
              </BreadcrumbList>
            </Breadcrumb>
          </div>
        </div>

        {/* Deck Selection */}
        <div className="max-w-7xl mx-auto p-8">
          <div
            className="mb-8"
          >
            <h1 className="text-4xl font-bold mb-2">
              Flashcard Decks
            </h1>
            <p className="text-muted-foreground">Master concepts through spaced repetition</p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {mockDecks.map((deck, i) => (
              <div
                key={deck.id}
                onClick={() => setSelectedDeck(deck.id)}
                className="cursor-pointer"
              >
                <Card className="border hover:border-primary/60 transition-all">
                  <CardContent className="p-6">
                    <div className="flex items-center justify-between mb-4">
                      <Badge>
                        {deck.cards} cards
                      </Badge>
                      <Brain className="w-6 h-6 text-primary" />
                    </div>
                    
                    <h3 className="text-xl font-bold mb-4">{deck.name}</h3>
                    
                    <div className="space-y-2">
                      <div className="flex justify-between text-sm">
                        <span className="text-muted-foreground">Progress</span>
                        <span className="font-bold text-primary">
                          {Math.round((deck.mastered / deck.cards) * 100)}%
                        </span>
                      </div>
                      <Progress 
                        value={(deck.mastered / deck.cards) * 100} 
                        className="h-2"
                      />
                    </div>
                  </CardContent>
                </Card>
              </div>
            ))}
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen">
      {/* Header */}
      <div className="border-b">
        <div className="max-w-7xl mx-auto px-8 py-4">
          <div className="flex items-center justify-between">
            <Breadcrumb>
              <BreadcrumbList>
                <BreadcrumbItem>
                  <BreadcrumbLink 
                    onClick={() => setSelectedDeck(null)}
                    className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors group"
                  >
                    <ArrowLeft className="w-4 h-4" />
                    Back to Decks
                  </BreadcrumbLink>
                </BreadcrumbItem>
              </BreadcrumbList>
            </Breadcrumb>

            {/* Stats */}
            <div className="flex items-center gap-6">
              <div
                className="flex items-center gap-2"
              >
                <Flame className="w-6 h-6 text-orange-500" />
                <span className="text-2xl font-bold text-orange-500">{streak}</span>
                <span className="text-sm text-muted-foreground">day streak</span>
              </div>
              
              <div className="flex items-center gap-2">
                <Star className="w-5 h-5 text-yellow-500" />
                <span className="text-lg font-bold">{cardsReviewed}/{mockCards.length}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Flashcard Area */}
      <div className="max-w-4xl mx-auto px-8 py-16">
        <div className="flex flex-col items-center">
          {/* Progress */}
          <div
            className="w-full mb-8"
          >
            <Progress value={(currentCardIndex / mockCards.length) * 100} className="h-3" />
            <p className="text-center mt-2 text-sm text-muted-foreground">
              Card {currentCardIndex + 1} of {mockCards.length}
            </p>
          </div>

          {/* Card */}
          <div
            className="w-full max-w-2xl mb-8"
            onClick={() => setIsFlipped(!isFlipped)}
          >
            <Card className="min-h-[400px] relative border-2 hover:border-primary/60 transition-all shadow-lg">
              <CardContent className="p-12 flex items-center justify-center h-full min-h-[400px]">
                {isFlipped ? (
                  <div className="text-center">
                    <Badge className="mb-6">
                      Answer
                    </Badge>
                    <p className="text-xl leading-relaxed">
                      {currentCard.back}
                    </p>
                  </div>
                ) : (
                  <div className="text-center">
                    <Badge className="mb-6">
                      Question
                    </Badge>
                    <p className="text-2xl font-semibold leading-relaxed">
                      {currentCard.front}
                    </p>
                  </div>
                )}
              </CardContent>
            </Card>

            <p className="text-center mt-4 text-sm text-muted-foreground">
              Click card to flip
            </p>
          </div>

          {/* Actions */}
          {isFlipped && (
            <div
              className="flex gap-6"
            >
              <div>
                <Button
                  size="lg"
                  variant="outline"
                  onClick={() => handleRate('hard')}
                  className="border-2 border-red-500/50 hover:bg-red-500/10 hover:border-red-500 text-red-500 rounded-full px-8 group"
                >
                  <X className="w-5 h-5 mr-2" />
                  Hard
                </Button>
              </div>

              <div>
                <Button
                  size="lg"
                  onClick={() => handleRate('easy')}
                  className="bg-green-500 hover:bg-green-600 text-white rounded-full px-8 shadow-lg"
                >
                  <Check className="w-5 h-5 mr-2" />
                  Easy
                </Button>
              </div>

              <div>
                <Button
                  size="lg"
                  variant="outline"
                  onClick={() => setIsFlipped(false)}
                  className="border-2 border-primary/50 hover:bg-primary/10 hover:border-primary rounded-full px-8"
                >
                  <RotateCcw className="w-5 h-5 mr-2" />
                  Review Again
                </Button>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
import { useState, useEffect, useRef } from "react";
import { FileText, BookOpen, FileSearch } from "lucide-react";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
const ChatInterface = ({ onSendMessage }: any) => {
  const [message, setMessage] = useState("");
  const [messages, setMessages] = useState<Array<{ role: string; content: string }>>([]);
  const handleSend = async () => {
    if (!message.trim()) return;
 
    setMessages(prev => [...prev, { role: "user", content: message }]);
    const response = await onSendMessage(message);
    setMessages(prev => [...prev, { role: "assistant", content: response }]);
    setMessage("");
  };
  return (
    <div className="flex flex-col h-full">
      <div className="flex-1 overflow-y-auto p-6 space-y-4">
        {messages.length === 0 ? (
          <div className="text-center text-muted-foreground mt-8">
            Ask questions about the document
          </div>
        ) : (
          messages.map((msg, idx) => (
            <div key={idx} className={`${msg.role === "user" ? "text-right" : "text-left"}`}>
              <div className={`inline-block p-3 rounded-lg max-w-[80%] ${
                msg.role === "user"
                  ? "bg-primary text-primary-foreground"
                  : "bg-muted"
              }`}>
                {msg.content}
              </div>
            </div>
          ))
        )}
      </div>
      <div className="p-4 border-t flex gap-2">
        <input
          type="text"
          value={message}
          onChange={(e) => setMessage(e.target.value)}
          onKeyPress={(e) => e.key === "Enter" && handleSend()}
          placeholder="Ask about the document..."
          className="flex-1 px-4 py-2 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
        />
        <button
          onClick={handleSend}
          className="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90"
        >
          Send
        </button>
      </div>
    </div>
  );
};
const PDFViewer = ({ pdfUrl }: { pdfUrl: string | null }) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [pdfDoc, setPdfDoc] = useState<any>(null);
  const [numPages, setNumPages] = useState(0);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");
  const [pagesRendered, setPagesRendered] = useState(false);
  useEffect(() => {
    if (!pdfUrl) return;
    const loadPDF = async () => {
      setLoading(true);
      setError("");
      setPagesRendered(false);
      const waitForPDFJS = () => {
        return new Promise((resolve) => {
          if ((window as any).pdfjsLib) {
            resolve(null);
          } else {
            const check = setInterval(() => {
              if ((window as any).pdfjsLib) {
                clearInterval(check);
                resolve(null);
              }
            }, 100);
            setTimeout(() => {
              clearInterval(check);
              resolve("PDF.js timeout");
            }, 5000);
          }
        });
      };
      try {
        await waitForPDFJS();
        const pdfjsLib = (window as any).pdfjsLib;
        if (!pdfjsLib) throw new Error("PDF.js library not loaded");
        pdfjsLib.GlobalWorkerOptions.workerSrc =
          'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
      
        const loadingTask = pdfjsLib.getDocument({
          url: pdfUrl,
          httpHeaders: {
            'Accept': 'application/pdf'
          }
        });
        const pdf = await loadingTask.promise;
     
        setPdfDoc(pdf);
        setNumPages(pdf.numPages);
        setLoading(false);
      } catch (err: any) {
        console.error("Error loading PDF:", err);
        setError(`Failed to load PDF: ${err.message}`);
        setLoading(false);
      }
    };
    loadPDF();
  }, [pdfUrl]);
  useEffect(() => {
    if (!pdfDoc || !containerRef.current || pagesRendered) return;
  
    const renderAllPages = async () => {
      const container = containerRef.current!;
      container.innerHTML = ''; // Clear any previous content
      for (let pageNum = 1; pageNum <= numPages; pageNum++) {
        const page = await pdfDoc.getPage(pageNum);
        const canvas = document.createElement('canvas');
        const scale = 1.5;
        const viewport = page.getViewport({ scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        canvas.className = 'shadow-lg bg-white mb-4 max-w-full';
    
        const context = canvas.getContext('2d')!;
        await page.render({
          canvasContext: context,
          viewport: viewport
        }).promise;
        container.appendChild(canvas);
      }
      setPagesRendered(true);
    };
    renderAllPages();
  }, [pdfDoc, numPages, pagesRendered]);
  if (loading) {
    return (
      <div className="flex items-center justify-center h-full">
        <div className="text-muted-foreground">Loading PDF...</div>
      </div>
    );
  }
  if (error) {
    return (
      <div className="flex items-center justify-center h-full">
        <div className="text-center">
          <FileText className="w-16 h-16 text-muted-foreground mx-auto mb-4" />
          <p className="text-red-500 mb-2">Error loading PDF</p>
          <p className="text-sm text-muted-foreground">{error}</p>
        </div>
      </div>
    );
  }
  return (
    <div className="flex flex-col h-full">
      <div
        ref={containerRef}
        id="pdf-container"
        className="flex-1 overflow-auto bg-muted/30 p-8 flex flex-col items-center space-y-4"
      >
        {!pagesRendered && (
          <div className="text-muted-foreground">Rendering pages...</div>
        )}
      </div>
    </div>
  );
};
type View = "document" | "library" | "search";
export default function FocusMode() {
  const [currentView, setCurrentView] = useState<View>("document");
  const [pdfUrl, setPdfUrl] = useState<string | null>(null);
  const [loadingPdf, setLoadingPdf] = useState(true);
  useEffect(() => {
    const script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';
    script.async = true;
    document.body.appendChild(script);
    return () => {
      document.body.removeChild(script);
    };
  }, []);
  useEffect(() => {
    const fetchPDFUrl = async () => {
      setLoadingPdf(true);
      try {
        // In production: Call your API that returns the PDF URL
        // const response = await fetch('/api/get-pdf-url');
        // const { url } = await response.json();
      
        // For now, directly use localhost URL with CORS proxy
        const proxyUrl = 'http://localhost:8127/myfile.pdf';
        setPdfUrl(proxyUrl);
        setLoadingPdf(false);
      } catch (err: any) {
        console.error('Failed to get PDF URL:', err);
        alert(`Failed to load PDF. Error: ${err.message}`);
        setLoadingPdf(false);
      }
    };
    fetchPDFUrl();
  }, []);
  const handleChatMessage = async (message: string): Promise<string> => {
    await new Promise((resolve) => setTimeout(resolve, 500));
  
    // In production, this would call your AI API
    // const response = await fetch('/api/chat', {
    // method: 'POST',
    // headers: { 'Content-Type': 'application/json' },
    // body: JSON.stringify({ message })
    // });
    // const data = await response.json();
    // return data.response;
  
    return `You asked: "${message}". This is a placeholder response about the document.`;
  };
  return (
    <div className="flex h-[calc(100vh-4rem)] bg-background overflow-hidden">
      <div className="w-16 bg-card border-r border-border flex flex-col items-center py-4 gap-2">
        <button
          onClick={() => setCurrentView("document")}
          className={`w-12 h-12 rounded-lg flex items-center justify-center transition-colors ${
            currentView === "document"
              ? "bg-primary text-primary-foreground"
              : "text-muted-foreground hover:bg-muted hover:text-foreground"
          }`}
          title="Document View"
        >
          <FileText className="w-5 h-5" />
        </button>
     
        <button
          onClick={() => setCurrentView("library")}
          className={`w-12 h-12 rounded-lg flex items-center justify-center transition-colors ${
            currentView === "library"
              ? "bg-primary text-primary-foreground"
              : "text-muted-foreground hover:bg-muted hover:text-foreground"
          }`}
          title="Library"
        >
          <BookOpen className="w-5 h-5" />
        </button>
     
        <button
          onClick={() => setCurrentView("search")}
          className={`w-12 h-12 rounded-lg flex items-center justify-center transition-colors ${
            currentView === "search"
              ? "bg-primary text-primary-foreground"
              : "text-muted-foreground hover:bg-muted hover:text-foreground"
          }`}
          title="Search Documents"
        >
          <FileSearch className="w-5 h-5" />
        </button>
        <div className="flex-1" />
      </div>
      <div className="flex-1 flex overflow-hidden h-full">
        {currentView === "document" && (
          <>
            <div className="flex flex-col flex-[6] border-r border-border overflow-hidden h-full">
              <div className="bg-card border-b border-border px-6 py-4 flex-shrink-0">
                <div className="flex items-center gap-2">
                  <FileText className="w-5 h-5 text-muted-foreground" />
                  <h2 className="text-lg font-semibold text-card-foreground">Document</h2>
                  <p className="text-sm text-muted-foreground ml-2">myfile.pdf</p>
                </div>
              </div>
              {loadingPdf ? (
                <div className="flex items-center justify-center h-full">
                  <div className="text-muted-foreground">Fetching PDF from localhost:8127...</div>
                </div>
              ) : (
                <PDFViewer pdfUrl={pdfUrl} />
              )}
            </div>
            <div className="flex flex-col bg-card flex-[4] overflow-hidden">
              <Tabs defaultValue="chat" orientation="vertical" className="h-full flex flex-row-reverse">
                <TabsList className="flex flex-col h-full bg-card border-l border-border p-2">
                  <TabsTrigger value="chat" className="[writing-mode:vertical-rl] text-lg my-2">Chat</TabsTrigger>
                  <TabsTrigger value="summary" className="[writing-mode:vertical-rl] text-lg my-2">Summary</TabsTrigger>
                  <TabsTrigger value="notes" className="[writing-mode:vertical-rl] text-lg my-2">Notes</TabsTrigger>
                </TabsList>
                <TabsContent value="chat" className="flex-1 overflow-y-auto m-0">
                  <ChatInterface onSendMessage={handleChatMessage} />
                </TabsContent>
                <TabsContent value="summary" className="flex-1 overflow-y-auto p-6 m-0">
                  <div className="space-y-4">
                    <h3 className="text-xl font-semibold">Document Summary</h3>
                    <p className="text-muted-foreground">
                      The summary of this document will appear here once generated.
                    </p>
                  </div>
                </TabsContent>
                <TabsContent value="notes" className="flex-1 overflow-y-auto p-6 m-0">
                  <div className="space-y-4">
                    <h3 className="text-xl font-semibold">Your Notes</h3>
                    <textarea
                      placeholder="Take notes about this document..."
                      className="w-full h-64 p-4 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring resize-none"
                    />
                  </div>
                </TabsContent>
              </Tabs>
            </div>
          </>
        )}
        {currentView === "library" && (
          <div className="flex-1 p-8 overflow-auto">
            <div className="max-w-6xl mx-auto">
              <h1 className="text-3xl font-bold mb-6">Document Library</h1>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {[1, 2, 3, 4, 5, 6].map((item) => (
                  <div
                    key={item}
                    className="bg-card border border-border rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer"
                    onClick={() => setCurrentView("document")}
                  >
                    <div className="flex items-start gap-3">
                      <FileText className="w-8 h-8 text-primary flex-shrink-0" />
                      <div>
                        <h3 className="font-semibold mb-1">Document {item}</h3>
                        <p className="text-sm text-muted-foreground">
                          Click to open and analyze
                        </p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}
        {currentView === "search" && (
          <div className="flex-1 p-8 overflow-auto">
            <div className="max-w-4xl mx-auto">
              <h1 className="text-3xl font-bold mb-6">Search Documents</h1>
              <div className="mb-8">
                <input
                  type="text"
                  placeholder="Search across all documents..."
                  className="w-full px-4 py-3 bg-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                />
              </div>
              <div className="space-y-4">
                <p className="text-muted-foreground">
                  Search results will appear here.
                </p>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
import { HeroSection } from "@/components/home/HeroSection";
import { FeaturedCarousel } from "@/components/home/FeaturedCarousel";
import { featuredCards } from "@/lib/data";
export default function Home() {
  return (
    <div className="flex-1 overflow-y-auto">
      <div className="mx-auto max-w-7xl px-4 md:px-6 lg:px-8">
        <HeroSection />
       
        <div className="pb-12">
          <FeaturedCarousel cards={featuredCards} />
        </div>
       
        <footer className="border-t border-border/40 py-12 mt-16">
          <div className="flex flex-col md:flex-row items-center justify-between gap-4">
            <p className="text-sm text-muted-foreground">
              &copy; 2025 Padh.ai. All rights reserved.
            </p>
            <div className="flex gap-6 text-sm text-muted-foreground">
              <a href="/privacy" className="hover:text-primary transition-colors">Privacy</a>
              <a href="/terms" className="hover:text-primary transition-colors">Terms</a>
              <a href="/about" className="hover:text-primary transition-colors">About</a>
            </div>
          </div>
        </footer>
      </div>
    </div>
  );
}
import { useState } from "react";
import { useLocation } from "wouter";
import { FileText, Plus, Search, Grid, List, MoreHorizontal } from "lucide-react";
import { Button } from "@/components/ui/button";
import { ContentCard } from "@/components/home/ContentCard";
import type { ContentCard as ContentCardType } from "@/lib/data";

interface Document {
  id: string;
  name: string;
  uploadedAt: string;
  pages: number;
  progress: number;
}

const mockDocuments: Document[] = [
  { id: "1", name: "Quantum Physics Chapter 3", uploadedAt: "2 hours ago", pages: 24, progress: 75 },
  { id: "2", name: "Organic Chemistry Notes", uploadedAt: "1 day ago", pages: 45, progress: 40 },
  { id: "3", name: "Machine Learning Basics", uploadedAt: "3 days ago", pages: 60, progress: 90 },
  { id: "4", name: "World History - WW2", uploadedAt: "1 week ago", pages: 32, progress: 100 },
  { id: "5", name: "Calculus Integration", uploadedAt: "2 weeks ago", pages: 18, progress: 60 },
];

// Convert documents to ContentCard format for grid view
const documentsAsCards: ContentCardType[] = mockDocuments.map((doc) => ({
  id: doc.id,
  title: doc.name,
  description: `${doc.pages} pages • Uploaded ${doc.uploadedAt}`,
  image: "/placeholder.svg",
  category: "Document",
  progress: doc.progress,
  href: `/@me/content/${doc.id}`, // Corrected property name and value
}));

export default function LibraryPage() {
  const [, navigate] = useLocation();
  const [viewMode, setViewMode] = useState<"grid" | "list">("list");
  const [searchQuery, setSearchQuery] = useState("");

  const filteredDocs = mockDocuments.filter((doc) =>
    doc.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const filteredCards = documentsAsCards.filter((card) =>
    card.title.toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div className="flex-1 overflow-y-auto">
      <div className="max-w-7xl mx-auto px-4 py-8">
        <div className="flex items-center justify-between mb-8">
          <div>
            <h1 className="text-2xl font-medium mb-1">Library</h1>
            <p className="text-sm text-muted-foreground">{mockDocuments.length} documents</p>
          </div>
          <Button onClick={() => navigate("/mode/focus")}>
            <Plus className="h-4 w-4 mr-2" />
            Upload PDF
          </Button>
        </div>

        <div className="flex items-center gap-3 mb-6">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
            <input
              type="text"
              placeholder="Search documents..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 text-sm bg-background border border-border rounded-lg focus:outline-none focus:ring-1 focus:ring-foreground"
            />
          </div>
          <div className="flex border border-border rounded-lg overflow-hidden">
            <button
              onClick={() => setViewMode("list")}
              className={`p-2 ${viewMode === "list" ? "bg-muted" : "hover:bg-muted/50"}`}
            >
              <List className="h-4 w-4" />
            </button>
            <button
              onClick={() => setViewMode("grid")}
              className={`p-2 ${viewMode === "grid" ? "bg-muted" : "hover:bg-muted/50"}`}
            >
              <Grid className="h-4 w-4" />
            </button>
          </div>
        </div>

        {viewMode === "list" ? (
          <div className="border border-border rounded-lg overflow-hidden">
            <table className="w-full">
              <thead>
                <tr className="border-b border-border bg-muted/30">
                  <th className="text-left text-xs font-medium text-muted-foreground px-4 py-3">Name</th>
                  <th className="text-left text-xs font-medium text-muted-foreground px-4 py-3">Pages</th>
                  <th className="text-left text-xs font-medium text-muted-foreground px-4 py-3">Progress</th>
                  <th className="text-left text-xs font-medium text-muted-foreground px-4 py-3">Uploaded</th>
                  <th className="w-10"></th>
                </tr>
              </thead>
              <tbody>
                {filteredDocs.map((doc) => (
                  <tr
                    key={doc.id}
                    onClick={() => navigate(`/@me/content/${doc.id}`)} // Corrected navigation
                    className="border-b border-border last:border-0 hover:bg-muted/30 cursor-pointer"
                  >
                    <td className="px-4 py-3">
                      <div className="flex items-center gap-3">
                        <FileText className="h-4 w-4 text-muted-foreground" />
                        <span className="text-sm">{doc.name}</span>
                      </div>
                    </td>
                    <td className="px-4 py-3">
                      <span className="text-sm text-muted-foreground">{doc.pages}</span>
                    </td>
                    <td className="px-4 py-3">
                      <div className="flex items-center gap-2">
                        <div className="w-16 h-1 bg-muted rounded-full overflow-hidden">
                          <div
                            className="h-full bg-foreground rounded-full"
                            style={{ width: `${doc.progress}%` }}
                          />
                        </div>
                        <span className="text-xs text-muted-foreground">{doc.progress}%</span>
                      </div>
                    </td>
                    <td className="px-4 py-3">
                      <span className="text-sm text-muted-foreground">{doc.uploadedAt}</span>
                    </td>
                    <td className="px-4 py-3">
                      <button
                        onClick={(e) => {
                          e.stopPropagation();
                        }}
                        className="p-1 hover:bg-muted rounded"
                      >
                        <MoreHorizontal className="h-4 w-4 text-muted-foreground" />
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            {filteredCards.map((card) => (
              <ContentCard key={card.id} card={card} />
            ))}
          </div>
        )}

        {filteredDocs.length === 0 && (
          <div className="text-center py-12">
            <FileText className="h-12 w-12 mx-auto mb-4 text-muted-foreground" />
            <p className="text-muted-foreground">No documents found</p>
          </div>
        )}
      </div>
    </div>
  );
}import { useState } from 'react';
import { useLocation } from "wouter";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { useAuth } from "@/hooks/use-auth";

export default function LoginPage() {
  const [isLogin, setIsLogin] = useState(true);
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    password: ''
  });
  const [errors, setErrors] = useState<Record<string, string>>({});
  const { login, signup } = useAuth();
  const [, setLocation] = useLocation();

  const validateForm = () => {
    const newErrors: Record<string, string> = {};

    if (!isLogin && !formData.name.trim()) {
      newErrors.name = 'Name is required';
    }

    if (!formData.email.trim()) {
      newErrors.email = 'Email is required';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      newErrors.email = 'Invalid email format';
    }

    if (!formData.password) {
      newErrors.password = 'Password is required';
    } else if (formData.password.length < 6) {
      newErrors.password = 'Password must be at least 6 characters';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = () => {
    if (!validateForm()) return;

    if (isLogin) {
      const success = login(formData.email, formData.password);
      if (success) {
        setLocation('/');
      } else {
        setErrors({ email: 'Invalid credentials' });
      }
    } else {
      const success = signup(formData.name, formData.email, formData.password);
      if (success) {
        setLocation('/');
      } else {
        setErrors({ email: 'Email already exists' });
      }
    }
  };

  const handleChange = (field: string, value: string) => {
    setFormData(prev => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors(prev => {
        const newErrors = { ...prev };
        delete newErrors[field];
        return newErrors;
      });
    }
  };

  const toggleMode = () => {
    setIsLogin(!isLogin);
    setErrors({});
    setFormData({ name: '', email: '', password: '' });
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter') {
      handleSubmit();
    }
  };

  return (
    <div className="min-h-screen bg-background flex items-center justify-center p-4">
      <div className="w-full max-w-md">
        <div className="text-center mb-8">
          <div className="inline-flex items-center gap-3 mb-4">
            <div 
              className="w-12 h-12 rounded-lg flex items-center justify-center" 
              style={{ backgroundColor: '#74AF87' }}
            >
              <span className="text-white font-bold text-2xl">P</span>
            </div>
            <h1 className="text-3xl font-semibold tracking-tight">Padh.ai</h1>
          </div>
          <p className="text-muted-foreground text-sm">
            {isLogin ? 'Login to continue' : 'Create your account'}
          </p>
        </div>

        <div className="border border-border rounded-lg bg-card p-8">
          <div className="space-y-5">
            {!isLogin && (
              <div>
                <label className="block text-sm font-medium mb-2">Name</label>
                <Input
                  type="text"
                  value={formData.name}
                  onChange={(e) => handleChange('name', e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder="Enter your name"
                  className={errors.name ? 'border-red-500' : ''}
                  data-testid="input-name"
                />
                {errors.name && (
                  <p className="text-red-500 text-xs mt-1" data-testid="error-name">
                    {errors.name}
                  </p>
                )}
              </div>
            )}

            <div>
              <label className="block text-sm font-medium mb-2">Email</label>
              <Input
                type="email"
                value={formData.email}
                onChange={(e) => handleChange('email', e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Enter your email"
                className={errors.email ? 'border-red-500' : ''}
                data-testid="input-email"
              />
              {errors.email && (
                <p className="text-red-500 text-xs mt-1" data-testid="error-email">
                  {errors.email}
                </p>
              )}
            </div>

            <div>
              <label className="block text-sm font-medium mb-2">Password</label>
              <Input
                type="password"
                value={formData.password}
                onChange={(e) => handleChange('password', e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Enter your password"
                className={errors.password ? 'border-red-500' : ''}
                data-testid="input-password"
              />
              {errors.password && (
                <p className="text-red-500 text-xs mt-1" data-testid="error-password">
                  {errors.password}
                </p>
              )}
            </div>

            <Button
              onClick={handleSubmit}
              className="w-full"
              style={{ backgroundColor: '#74AF87' }}
              data-testid="button-submit"
            >
              {isLogin ? 'Login' : 'Sign Up'}
            </Button>
          </div>

          <div className="mt-6 text-center">
            <button
              onClick={toggleMode}
              className="text-sm text-muted-foreground hover:text-foreground"
              data-testid="button-toggle-mode"
            >
              {isLogin ? "Don't have an account? " : "Already have an account? "}
              <span className="font-medium" style={{ color: '#74AF87' }}>
                {isLogin ? 'Sign up' : 'Login'}
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}import { useState, useRef, useEffect, useCallback } from "react";
import { useLocation, useParams } from "wouter";
import { ArrowLeft, Plus, ZoomIn, ZoomOut, Move, Trash2 } from "lucide-react";
import { Button } from "@/components/ui/button";

interface MindNode {
  id: string;
  text: string;
  x: number;
  y: number;
  parentId: string | null;
}

const initialNodes: MindNode[] = [
  { id: "1", text: "Quantum Physics", x: 400, y: 250, parentId: null },
  { id: "2", text: "Wave-Particle Duality", x: 200, y: 150, parentId: "1" },
  { id: "3", text: "Uncertainty Principle", x: 200, y: 350, parentId: "1" },
  { id: "4", text: "Quantum Entanglement", x: 600, y: 150, parentId: "1" },
  { id: "5", text: "Superposition", x: 600, y: 350, parentId: "1" },
  { id: "6", text: "Double-Slit", x: 80, y: 100, parentId: "2" },
  { id: "7", text: "Photon Behavior", x: 80, y: 200, parentId: "2" },
];

export default function MindMaps() {
  const [, navigate] = useLocation();
  const params = useParams();
  const containerRef = useRef<HTMLDivElement>(null);
  const [nodes, setNodes] = useState<MindNode[]>(initialNodes);
  const [zoom, setZoom] = useState(1);
  const [pan, setPan] = useState({ x: 0, y: 0 });
  const [draggingNode, setDraggingNode] = useState<string | null>(null);
  const [editingNode, setEditingNode] = useState<string | null>(null);
  const [editText, setEditText] = useState("");
  const [isPanning, setIsPanning] = useState(false);
  const [lastPanPos, setLastPanPos] = useState({ x: 0, y: 0 });

  const handleNodeDragStart = (e: React.MouseEvent, nodeId: string) => {
    e.stopPropagation();
    setDraggingNode(nodeId);
  };

  const handleMouseMove = useCallback((e: MouseEvent) => {
    if (draggingNode) {
      const rect = containerRef.current?.getBoundingClientRect();
      if (rect) {
        setNodes(prevNodes => {
          const x = (e.clientX - rect.left - pan.x) / zoom;
          const y = (e.clientY - rect.top - pan.y) / zoom;
          return prevNodes.map(n => n.id === draggingNode ? { ...n, x, y } : n);
        });
      }
    } else if (isPanning) {
      const dx = e.clientX - lastPanPos.x;
      const dy = e.clientY - lastPanPos.y;
      setPan(prevPan => ({ x: prevPan.x + dx, y: prevPan.y + dy }));
      setLastPanPos({ x: e.clientX, y: e.clientY });
    }
  }, [draggingNode, isPanning, lastPanPos, pan.x, pan.y, zoom]);

  const handleMouseUp = useCallback(() => {
    setDraggingNode(null);
    setIsPanning(false);
  }, []);

  useEffect(() => {
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseup", handleMouseUp);
    };
  }, [handleMouseMove, handleMouseUp]);

  const handlePanStart = (e: React.MouseEvent) => {
    if (e.target === containerRef.current || (e.target as HTMLElement).tagName === "svg") {
      setIsPanning(true);
      setLastPanPos({ x: e.clientX, y: e.clientY });
    }
  };

  const handleZoom = (delta: number) => {
    setZoom(Math.max(0.5, Math.min(2, zoom + delta)));
  };

  const handleAddNode = (parentId: string) => {
    const parent = nodes.find(n => n.id === parentId);
    if (parent) {
      const newNode: MindNode = {
        id: String(Date.now()),
        text: "New Topic",
        x: parent.x + 100,
        y: parent.y + 80,
        parentId
      };
      setNodes([...nodes, newNode]);
      setEditingNode(newNode.id);
      setEditText(newNode.text);
    }
  };

  const handleDeleteNode = (nodeId: string) => {
    const idsToDelete = new Set<string>([nodeId]);
    let changed = true;
    while (changed) {
      changed = false;
      nodes.forEach(n => {
        if (n.parentId && idsToDelete.has(n.parentId) && !idsToDelete.has(n.id)) {
          idsToDelete.add(n.id);
          changed = true;
        }
      });
    }
    setNodes(nodes.filter(n => !idsToDelete.has(n.id)));
  };

  const handleNodeDoubleClick = (nodeId: string, text: string) => {
    setEditingNode(nodeId);
    setEditText(text);
  };

  const handleEditSubmit = () => {
    if (editingNode) {
      setNodes(nodes.map(n => n.id === editingNode ? { ...n, text: editText } : n));
      setEditingNode(null);
      setEditText("");
    }
  };

  const getConnections = () => {
    return nodes
      .filter(n => n.parentId)
      .map(n => {
        const parent = nodes.find(p => p.id === n.parentId);
        return parent ? { from: parent, to: n } : null;
      })
      .filter(Boolean) as { from: MindNode; to: MindNode }[];
  };

  return (
    <div className="flex h-[calc(100vh-3.5rem)] flex-col">
      <div className="border-b border-border px-4 py-3 flex items-center justify-between">
        <button
          onClick={() => navigate(`/@me/content/${params.courseId}`)}
          className="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground"
        >
          <ArrowLeft className="h-4 w-4" />
          Back to Course
        </button>
        <div className="flex items-center gap-2">
          <Button size="sm" variant="ghost" onClick={() => handleZoom(-0.1)}>
            <ZoomOut className="h-4 w-4" />
          </Button>
          <span className="text-sm text-muted-foreground w-12 text-center">
            {Math.round(zoom * 100)}%
          </span>
          <Button size="sm" variant="ghost" onClick={() => handleZoom(0.1)}>
            <ZoomIn className="h-4 w-4" />
          </Button>
        </div>
      </div>

      <div
        ref={containerRef}
        className="flex-1 overflow-hidden relative cursor-grab active:cursor-grabbing bg-muted/20"
        onMouseDown={handlePanStart}
        style={{
          backgroundImage: `radial-gradient(circle, hsl(var(--border)) 1px, transparent 1px)`,
          backgroundSize: `${20 * zoom}px ${20 * zoom}px`,
          backgroundPosition: `${pan.x}px ${pan.y}px`
        }}
      >
        <svg
          className="absolute inset-0 w-full h-full pointer-events-none"
          style={{ transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`, transformOrigin: "0 0" }}
        >
          {getConnections().map((conn, i) => (
            <line
              key={i}
              x1={conn.from.x}
              y1={conn.from.y}
              x2={conn.to.x}
              y2={conn.to.y}
              stroke="hsl(var(--border))"
              strokeWidth={2}
            />
          ))}
        </svg>

        <div
          style={{ transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`, transformOrigin: "0 0" }}
        >
          {nodes.map(node => (
            <div
              key={node.id}
              className="absolute group"
              style={{ left: node.x, top: node.y, transform: "translate(-50%, -50%)" }}
              onMouseDown={(e) => handleNodeDragStart(e, node.id)}
              onDoubleClick={() => handleNodeDoubleClick(node.id, node.text)}
            >
              <div
                className={`px-4 py-2 rounded-lg border bg-card cursor-move transition-shadow ${
                  node.parentId === null
                    ? "border-foreground font-medium"
                    : "border-border hover:border-foreground/50"
                } ${draggingNode === node.id ? "shadow-lg" : ""}`}
              >
                {editingNode === node.id ? (
                  <input
                    type="text"
                    value={editText}
                    onChange={(e) => setEditText(e.target.value)}
                    onBlur={handleEditSubmit}
                    onKeyDown={(e) => e.key === "Enter" && handleEditSubmit()}
                    className="bg-transparent border-none focus:outline-none text-sm min-w-[80px]"
                    autoFocus
                  />
                ) : (
                  <span className="text-sm whitespace-nowrap">{node.text}</span>
                )}
              </div>

              <div className="absolute -right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 flex gap-1">
                <button
                  onClick={(e) => { e.stopPropagation(); handleAddNode(node.id); }}
                  className="p-1 bg-card border border-border rounded hover:bg-muted"
                >
                  <Plus className="h-3 w-3" />
                </button>
                {node.parentId && (
                  <button
                    onClick={(e) => { e.stopPropagation(); handleDeleteNode(node.id); }}
                    className="p-1 bg-card border border-border rounded hover:bg-destructive/10"
                  >
                    <Trash2 className="h-3 w-3" />
                  </button>
                )}
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="border-t border-border px-4 py-2 flex items-center justify-center gap-4 text-xs text-muted-foreground">
        <span>Drag nodes to move</span>
        <span>Double-click to edit</span>
        <span>Hover for actions</span>
      </div>
    </div>
  );
}import { useState } from 'react';
import { useParams } from 'react-router-dom';
import { useLocation } from 'wouter';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import {
  ArrowLeft,
  Plus,
  Sparkles,
  Save,
  Folder,
  FileText,
  Lightbulb,
  Copy,
  Check
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';

const mockNotes = [
  {
    id: 1,
    folder: 'Wave-Particle Duality',
    notes: [
      { id: 11, title: 'Introduction to Waves', preview: 'Light behaves as both wave and particle...' },
      { id: 12, title: 'Double-Slit Experiment', preview: 'Famous experiment demonstrating...' },
    ]
  },
  {
    id: 2,
    folder: 'Schrödinger Equation',
    notes: [
      { id: 21, title: 'Wave Function', preview: 'The wave function describes quantum state...' },
      { id: 22, title: 'Time-dependent Form', preview: 'Evolution of quantum systems...' },
    ]
  },
];

const aiSuggestions = [
  { id: 1, type: 'summary', text: 'Wave-particle duality is a fundamental concept where light exhibits both wave and particle properties.' },
  { id: 2, type: 'formula', text: 'E = hν (Energy equals Planck constant times frequency)' },
  { id: 3, type: 'insight', text: 'Key connection: The observer effect shows measurement affects quantum states.' },
];

export default function Notes() {
  const { courseId } = useParams();
  const [, navigate] = useLocation();
  const [selectedNote, setSelectedNote] = useState<number | null>(11);
  const [noteContent, setNoteContent] = useState('# Introduction to Waves\n\nLight behaves as both wave and particle in different experimental contexts...');
  const [saved, setSaved] = useState(false);
  const [copiedId, setCopiedId] = useState<number | null>(null);

  const handleSave = () => {
    setSaved(true);
    setTimeout(() => setSaved(false), 2000);
  };

  const copySuggestion = (id: number, text: string) => {
    navigator.clipboard.writeText(text);
    setCopiedId(id);
    setTimeout(() => setCopiedId(null), 2000);
  };

  return (
    <div className="min-h-screen">
      {/* Header */}
      <div className="border-b sticky top-0 z-40 bg-background/95 backdrop-blur-sm">
        <div className="max-w-7xl mx-auto px-8 py-4">
          <Breadcrumb>
            <BreadcrumbList>
              <BreadcrumbItem>
                <BreadcrumbLink 
                  onClick={() => navigate('/@me/content')}
                  className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors group"
                >
                  <ArrowLeft className="w-4 h-4" />
                  Library
                </BreadcrumbLink>
              </BreadcrumbItem>
              <BreadcrumbSeparator />
              <BreadcrumbItem>
                <BreadcrumbLink 
                  onClick={() => navigate(`/@me/content/${courseId}`)}
                  className="cursor-pointer hover:text-primary transition-colors"
                >
                  Quantum Physics
                </BreadcrumbLink>
              </BreadcrumbItem>
              <BreadcrumbSeparator />
              <BreadcrumbItem>
                <BreadcrumbLink className="text-primary">Notes</BreadcrumbLink>
              </BreadcrumbItem>
            </BreadcrumbList>
          </Breadcrumb>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto p-8">
        <div
          className="mb-8"
        >
          <h1 className="text-4xl font-bold mb-2">
            Smart Notes
          </h1>
          <p className="text-muted-foreground">Your AI-powered knowledge base</p>
        </div>

        <div className="grid lg:grid-cols-12 gap-6">
          {/* Left Sidebar - Note Tree */}
          <div
            className="lg:col-span-3"
          >
            <Card className="sticky top-24 max-h-[calc(100vh-8rem)] overflow-y-auto">
              <CardHeader>
                <CardTitle className="flex items-center justify-between">
                  <span className="flex items-center gap-2">
                    <Folder className="w-5 h-5 text-primary" />
                    Folders
                  </span>
                  <Button size="sm" variant="ghost" className="hover:bg-primary/10">
                    <Plus className="w-4 h-4" />
                  </Button>
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-2">
                <Accordion type="single" collapsible defaultValue="item-1">
                  {mockNotes.map((folder, i) => (
                    <AccordionItem key={folder.id} value={`item-${folder.id}`}>
                      <AccordionTrigger className="hover:text-primary transition-colors">
                        <div
                          className="flex items-center gap-2"
                        >
                          <Folder className="w-4 h-4" />
                          {folder.folder}
                        </div>
                      </AccordionTrigger>
                      <AccordionContent>
                        <div className="space-y-1 ml-4">
                          {folder.notes.map((note) => (
                            <div
                              key={note.id}
                              onClick={() => setSelectedNote(note.id)}
                              className={`p-2 rounded-lg cursor-pointer transition-all ${selectedNote === note.id
                                  ? 'bg-primary/20 border-l-2 border-primary'
                                  : 'hover:bg-muted'}`}
                            >
                              <div className="flex items-center gap-2">
                                <FileText className="w-4 h-4 text-primary" />
                                <span className="text-sm truncate">{note.title}</span>
                              </div>
                            </div>
                          ))}
                        </div>
                      </AccordionContent>
                    </AccordionItem>
                  ))}
                </Accordion>
              </CardContent>
            </Card>
          </div>

          {/* Center - Editor */}
          <div
            className="lg:col-span-6"
          >
            <Card>
              <CardHeader>
                <div className="flex items-center justify-between">
                  <Input 
                    defaultValue="Introduction to Waves"
                    className="text-2xl font-bold border-0 focus-visible:ring-0 bg-transparent"
                  />
                  <Button 
                    onClick={handleSave}
                  >
                    <Save className="w-4 h-4 mr-2" />
                    Save
                  </Button>
                </div>
              </CardHeader>
              <CardContent>
                <div>
                  <Textarea
                    value={noteContent}
                    onChange={(e) => setNoteContent(e.target.value)}
                    className="min-h-[600px] font-mono text-base resize-none"
                    placeholder="Start writing your notes..."
                  />
                  
                  {/* Autosave indicator */}
                  <div
                    className="mt-4 flex items-center gap-2 text-sm text-muted-foreground"
                  >
                    <div
                      className="w-2 h-2 bg-primary rounded-full"
                    />
                    Auto-saving...
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Right Sidebar - AI Suggestions */}
          <div
            className="lg:col-span-3"
          >
            <Card className="sticky top-24 max-h-[calc(100vh-8rem)] overflow-y-auto border-2 border-primary/20">
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <div>
                    <Sparkles className="w-5 h-5 text-primary" />
                  </div>
                  AI Assistant
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                {aiSuggestions.map((suggestion, i) => (
                  <div
                    key={suggestion.id}
                    className="group"
                  >
                    <Card className="border-2 border-dashed border-primary/30 hover:border-primary/60 transition-all cursor-pointer relative overflow-hidden">
                      <div className="p-4 relative z-10">
                        <div className="flex items-start justify-between gap-2 mb-2">
                          <Badge 
                            variant="secondary"
                          >
                            <Lightbulb className="w-3 h-3 mr-1" />
                            {suggestion.type}
                          </Badge>
                          <Button
                            size="sm"
                            variant="ghost"
                            onClick={() => copySuggestion(suggestion.id, suggestion.text)}
                            className="h-6 w-6 p-0 hover:bg-primary/10"
                          >
                            {copiedId === suggestion.id ? (
                              <Check className="w-3 h-3 text-primary" />
                            ) : (
                              <Copy className="w-3 h-3" />
                            )}
                          </Button>
                        </div>
                        <p className="text-sm leading-relaxed">{suggestion.text}</p>
                      </div>
                    </Card>
                  </div>
                ))}

                {/* Generate More Button */}
                <div>
                  <Button 
                    className="w-full"
                  >
                    <Sparkles className="w-4 h-4 mr-2" />
                    Generate More
                  </Button>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
      </div>
    </div>
  );
}
import { Card, CardContent } from "@/components/ui/card";
import { AlertCircle, Home, ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";
export default function NotFound() {
  return (
    <div className="min-h-screen w-full flex items-center justify-center bg-background p-4">
      <Card className="w-full max-w-md border-border/50 shadow-xl animate-scale-in">
        <CardContent className="pt-6">
          <div className="text-center">
            {/* Icon */}
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-destructive/10 mb-6">
              <AlertCircle className="h-8 w-8 text-destructive" />
            </div>
           
            {/* Title */}
            <h1 className="text-4xl font-bold text-foreground mb-2">
              404
            </h1>
            <h2 className="text-xl font-semibold text-foreground mb-4">
              Page Not Found
            </h2>
           
            {/* Description */}
            <p className="text-muted-foreground mb-8">
              The page you're looking for doesn't exist or has been moved.
            </p>
           
            {/* Actions */}
            <div className="flex flex-col sm:flex-row gap-3 justify-center">
              <Button
                variant="default"
                className="gap-2 bg-primary hover:bg-primary/90"
                onClick={() => window.location.href = '/'}
              >
                <Home className="h-4 w-4" />
                Go Home
              </Button>
             
              <Button
                variant="outline"
                className="gap-2"
                onClick={() => window.history.back()}
              >
                <ArrowLeft className="h-4 w-4" />
                Go Back
              </Button>
            </div>
           
            {/* Additional Help */}
            <div className="mt-8 pt-8 border-t border-border/50">
              <p className="text-xs text-muted-foreground">
                Need help? <a href="/support" className="text-primary hover:underline">Contact Support</a>
              </p>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}import { useState } from "react";
import { useLocation, useParams } from "wouter";
import { ArrowLeft, Check, X, ChevronRight } from "lucide-react";
import { Button } from "@/components/ui/button";

interface Question {
  id: string;
  type: "mcq" | "fillblank";
  question: string;
  options?: string[];
  correctAnswer: string | number;
  explanation?: string;
}

const mockQuestions: Question[] = [
  {
    id: "1",
    type: "mcq",
    question: "What is the Heisenberg Uncertainty Principle?",
    options: [
      "Energy cannot be created or destroyed",
      "You cannot know position and momentum simultaneously with precision",
      "Light travels at a constant speed",
      "Matter and energy are equivalent"
    ],
    correctAnswer: 1,
    explanation: "The Heisenberg Uncertainty Principle states that you cannot simultaneously know the exact position and momentum of a particle."
  },
  {
    id: "2",
    type: "mcq",
    question: "What does E=mc² represent?",
    options: [
      "Force equals mass times acceleration",
      "Energy-mass equivalence",
      "Electromagnetic induction",
      "Entropy formula"
    ],
    correctAnswer: 1,
    explanation: "E=mc² shows that energy and mass are interchangeable; they are different forms of the same thing."
  },
  {
    id: "3",
    type: "fillblank",
    question: "The speed of light in vacuum is approximately _____ meters per second.",
    correctAnswer: "3 x 10^8",
    explanation: "Light travels at approximately 299,792,458 m/s, commonly rounded to 3 × 10⁸ m/s."
  },
  {
    id: "4",
    type: "mcq",
    question: "Which particle is responsible for electromagnetic force?",
    options: [
      "Gluon",
      "W boson",
      "Photon",
      "Graviton"
    ],
    correctAnswer: 2,
    explanation: "Photons are the force carriers (gauge bosons) for electromagnetic interactions."
  },
  {
    id: "5",
    type: "fillblank",
    question: "Planck's constant has a value of approximately 6.626 × 10^-34 _____.",
    correctAnswer: "J·s",
    explanation: "Planck's constant is measured in Joule-seconds (J·s)."
  }
];

export default function Quiz() {
  const [, navigate] = useLocation();
  const params = useParams();
  const [currentIndex, setCurrentIndex] = useState(0);
  const [selectedAnswer, setSelectedAnswer] = useState<number | string | null>(null);
  const [fillAnswer, setFillAnswer] = useState("");
  const [showResult, setShowResult] = useState(false);
  const [answers, setAnswers] = useState<(number | string | null)[]>([]);
  const [quizComplete, setQuizComplete] = useState(false);

  const currentQuestion = mockQuestions[currentIndex];
  const progress = ((currentIndex + 1) / mockQuestions.length) * 100;

  const handleSubmitAnswer = () => {
    const answer = currentQuestion.type === "fillblank" ? fillAnswer : selectedAnswer;
    setAnswers([...answers, answer]);
    setShowResult(true);
  };

  const handleNext = () => {
    if (currentIndex < mockQuestions.length - 1) {
      setCurrentIndex(currentIndex + 1);
      setSelectedAnswer(null);
      setFillAnswer("");
      setShowResult(false);
    } else {
      setQuizComplete(true);
    }
  };

  const normalizeAnswer = (answer: string): string => {
    return answer.toLowerCase().trim().replace(/\s+/g, ' ');
  };

  const checkFillBlank = (userAnswer: string, correctAnswer: string): boolean => {
    const normalizedUser = normalizeAnswer(userAnswer);
    const normalizedCorrect = normalizeAnswer(String(correctAnswer));
    if (normalizedUser === normalizedCorrect) return true;
    if (normalizedUser.includes(normalizedCorrect) || normalizedCorrect.includes(normalizedUser)) return true;
    const userClean = normalizedUser.replace(/[^a-z0-9]/g, '');
    const correctClean = normalizedCorrect.replace(/[^a-z0-9]/g, '');
    return userClean === correctClean || userClean.includes(correctClean) || correctClean.includes(userClean);
  };

  const isCorrect = () => {
    if (currentQuestion.type === "fillblank") {
      return checkFillBlank(fillAnswer, String(currentQuestion.correctAnswer));
    }
    return selectedAnswer === currentQuestion.correctAnswer;
  };

  const getScore = () => {
    return answers.filter((answer, idx) => {
      const q = mockQuestions[idx];
      if (q.type === "fillblank") {
        return checkFillBlank(String(answer || ''), String(q.correctAnswer));
      }
      return answer === q.correctAnswer;
    }).length;
  };

  if (quizComplete) {
    const score = getScore();
    const percentage = Math.round((score / mockQuestions.length) * 100);

    return (
      <div className="flex-1 overflow-y-auto">
        <div className="max-w-2xl mx-auto px-4 py-16 text-center">
          <h1 className="text-4xl font-medium mb-4">Quiz Complete</h1>
          <div className="mb-8">
            <div className="text-6xl font-medium mb-2">{percentage}%</div>
            <p className="text-muted-foreground">
              You got {score} out of {mockQuestions.length} correct
            </p>
          </div>

          <div className="space-y-3 mb-8">
            {mockQuestions.map((q, idx) => {
              const answer = answers[idx];
              const correct = q.type === "fillblank"
                ? checkFillBlank(String(answer || ''), String(q.correctAnswer))
                : answer === q.correctAnswer;
              
              return (
                <div
                  key={q.id}
                  className={`flex items-center gap-3 p-3 rounded-lg border ${
                    correct ? "border-foreground/20 bg-muted/30" : "border-destructive/30 bg-destructive/5"
                  }`}
                >
                  {correct ? (
                    <Check className="h-4 w-4 text-foreground" />
                  ) : (
                    <X className="h-4 w-4 text-destructive" />
                  )}
                  <span className="text-sm text-left flex-1">{q.question}</span>
                </div>
              );
            })}
          </div>

          <div className="flex gap-3 justify-center">
            <Button variant="outline" onClick={() => navigate(`/@me/content/${params.courseId}`)}>
              Back to Course
            </Button>
            <Button onClick={() => {
              setCurrentIndex(0);
              setSelectedAnswer(null);
              setFillAnswer("");
              setShowResult(false);
              setAnswers([]);
              setQuizComplete(false);
            }}>
              Retry Quiz
            </Button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="flex-1 overflow-y-auto">
      <div className="border-b border-border">
        <div className="max-w-3xl mx-auto px-4 py-3 flex items-center justify-between">
          <button
            onClick={() => navigate(`/@me/content/${params.courseId}`)}
            className="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground"
          >
            <ArrowLeft className="h-4 w-4" />
            Back to Course
          </button>
          <span className="text-sm text-muted-foreground">
            Question {currentIndex + 1} of {mockQuestions.length}
          </span>
        </div>
        <div className="h-1 bg-muted">
          <div
            className="h-full bg-foreground transition-all"
            style={{ width: `${progress}%` }}
          />
        </div>
      </div>

      <div className="max-w-2xl mx-auto px-4 py-12">
        <div className="mb-8">
          <span className="text-xs text-muted-foreground uppercase tracking-wider">
            {currentQuestion.type === "mcq" ? "Multiple Choice" : "Fill in the Blank"}
          </span>
          <h2 className="text-xl font-medium mt-2">{currentQuestion.question}</h2>
        </div>

        {currentQuestion.type === "mcq" ? (
          <div className="space-y-3 mb-8">
            {currentQuestion.options?.map((option, idx) => (
              <button
                key={idx}
                onClick={() => !showResult && setSelectedAnswer(idx)}
                disabled={showResult}
                className={`w-full text-left p-4 rounded-lg border transition-colors ${
                  showResult
                    ? idx === currentQuestion.correctAnswer
                      ? "border-foreground bg-muted"
                      : idx === selectedAnswer
                        ? "border-destructive bg-destructive/5"
                        : "border-border"
                    : selectedAnswer === idx
                      ? "border-foreground"
                      : "border-border hover:border-foreground/50"
                }`}
              >
                <div className="flex items-center gap-3">
                  <div className={`w-6 h-6 rounded-full border flex items-center justify-center text-xs ${
                    showResult
                      ? idx === currentQuestion.correctAnswer
                        ? "border-foreground bg-foreground text-background"
                        : idx === selectedAnswer
                          ? "border-destructive bg-destructive text-destructive-foreground"
                          : "border-border"
                      : selectedAnswer === idx
                        ? "border-foreground bg-foreground text-background"
                        : "border-border"
                  }`}>
                    {String.fromCharCode(65 + idx)}
                  </div>
                  <span className="text-sm">{option}</span>
                </div>
              </button>
            ))}
          </div>
        ) : (
          <div className="mb-8">
            <input
              type="text"
              value={fillAnswer}
              onChange={(e) => !showResult && setFillAnswer(e.target.value)}
              disabled={showResult}
              placeholder="Type your answer..."
              className={`w-full px-4 py-3 text-sm border rounded-lg bg-background focus:outline-none focus:ring-1 focus:ring-foreground ${
                showResult
                  ? isCorrect()
                    ? "border-foreground"
                    : "border-destructive"
                  : "border-border"
              }`}
            />
          </div>
        )}

        {showResult && (
          <div className={`mb-8 p-4 rounded-lg border ${
            isCorrect() ? "border-foreground/20 bg-muted/30" : "border-destructive/20 bg-destructive/5"
          }`}>
            <div className="flex items-center gap-2 mb-2">
              {isCorrect() ? (
                <Check className="h-4 w-4" />
              ) : (
                <X className="h-4 w-4 text-destructive" />
              )}
              <span className="font-medium text-sm">
                {isCorrect() ? "Correct!" : "Incorrect"}
              </span>
            </div>
            {currentQuestion.explanation && (
              <p className="text-sm text-muted-foreground">{currentQuestion.explanation}</p>
            )}
          </div>
        )}

        <div className="flex justify-end">
          {!showResult ? (
            <Button
              onClick={handleSubmitAnswer}
              disabled={currentQuestion.type === "mcq" ? selectedAnswer === null : !fillAnswer.trim()}
            >
              Check Answer
            </Button>
          ) : (
            <Button onClick={handleNext}>
              {currentIndex < mockQuestions.length - 1 ? (
                <>
                  Next Question
                  <ChevronRight className="h-4 w-4 ml-1" />
                </>
              ) : (
                "See Results"
              )}
            </Button>
          )}
        </div>
      </div>
    </div>
  );
}
import { HeroSection } from "@/components/home/HeroSection";
import { FeaturedCarousel } from "@/components/home/FeaturedCarousel";
import { featuredCards } from "@/lib/data";
export default function WorkMode() {
  return (
    <div className="flex-1 overflow-y-auto">
      <div className="mx-auto max-w-7xl px-4 md:px-6 lg:px-8">
        <HeroSection />
       
        <div className="pb-12">
          <FeaturedCarousel cards={featuredCards} />
        </div>
       
        <footer className="border-t border-border/40 py-12 mt-16">
          <div className="flex flex-col md:flex-row items-center justify-between gap-4">
            <p className="text-sm text-muted-foreground">
              &copy; 2025 Padh.ai. All rights reserved.
            </p>
            <div className="flex gap-6 text-sm text-muted-foreground">
              <a href="/privacy" className="hover:text-primary transition-colors">Privacy</a>
              <a href="/terms" className="hover:text-primary transition-colors">Terms</a>
              <a href="/about" className="hover:text-primary transition-colors">About</a>
            </div>
          </div>
        </footer>
      </div>
    </div>
  );
}import { useState } from 'react';
import { useLocation } from 'wouter';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Switch } from '@/components/ui/switch';
import { Separator } from '@/components/ui/separator';
import {
  ArrowLeft,
  User,
  Bell,
  Shield,
  Palette,
  Save
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';
import { useTheme } from '@/hooks/use-theme';

export default function Settings() {
  const [, navigate] = useLocation();
  const { theme, toggleTheme } = useTheme();
  const [saved, setSaved] = useState(false);

  const [settings, setSettings] = useState({
    name: 'John Doe',
    email: 'john@example.com',
    notifications: {
      email: true,
      push: false,
      studyReminders: true
    },
    privacy: {
      publicProfile: false,
      shareProgress: true
    }
  });

  const handleSave = () => {
    setSaved(true);
    setTimeout(() => setSaved(false), 2000);
    console.log('Settings saved:', settings);
  };

  return (
    <div className="min-h-screen">
      {/* Header */}
      <div className="border-b sticky top-0 z-40 bg-background">
        <div className="max-w-7xl mx-auto px-8 py-4">
          <Breadcrumb>
            <BreadcrumbList>
              <BreadcrumbItem>
                <BreadcrumbLink 
                  onClick={() => navigate('/')}
                  className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors"
                >
                  <ArrowLeft className="w-4 h-4" />
                  Home
                </BreadcrumbLink>
              </BreadcrumbItem>
              <BreadcrumbSeparator />
              <BreadcrumbItem>
                <BreadcrumbLink className="text-primary">Settings</BreadcrumbLink>
              </BreadcrumbItem>
            </BreadcrumbList>
          </Breadcrumb>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-4xl mx-auto p-8">
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Settings</h1>
          <p className="text-muted-foreground">Manage your account and preferences</p>
        </div>

        <div className="space-y-6">
          {/* Profile Settings */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <User className="w-5 h-5 text-primary" />
                Profile
              </CardTitle>
              <CardDescription>Update your personal information</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="space-y-2">
                <Label htmlFor="name">Name</Label>
                <Input
                  id="name"
                  value={settings.name}
                  onChange={(e) => setSettings({...settings, name: e.target.value})}
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="email">Email</Label>
                <Input
                  id="email"
                  type="email"
                  value={settings.email}
                  onChange={(e) => setSettings({...settings, email: e.target.value})}
                />
              </div>
            </CardContent>
          </Card>

          {/* Appearance */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Palette className="w-5 h-5 text-primary" />
                Appearance
              </CardTitle>
              <CardDescription>Customize how Padh.ai looks</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex items-center justify-between">
                <div>
                  <Label>Dark Mode</Label>
                  <p className="text-sm text-muted-foreground">
                    Switch between light and dark themes
                  </p>
                </div>
                <Switch
                  checked={theme === 'dark'}
                  onCheckedChange={toggleTheme}
                />
              </div>
            </CardContent>
          </Card>

          {/* Notifications */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Bell className="w-5 h-5 text-primary" />
                Notifications
              </CardTitle>
              <CardDescription>Manage your notification preferences</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex items-center justify-between">
                <div>
                  <Label>Email Notifications</Label>
                  <p className="text-sm text-muted-foreground">
                    Receive updates via email
                  </p>
                </div>
                <Switch
                  checked={settings.notifications.email}
                  onCheckedChange={(checked) => 
                    setSettings({
                      ...settings,
                      notifications: {...settings.notifications, email: checked}
                    })
                  }
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <Label>Study Reminders</Label>
                  <p className="text-sm text-muted-foreground">
                    Get reminded to study regularly
                  </p>
                </div>
                <Switch
                  checked={settings.notifications.studyReminders}
                  onCheckedChange={(checked) => 
                    setSettings({
                      ...settings,
                      notifications: {...settings.notifications, studyReminders: checked}
                    })
                  }
                />
              </div>
            </CardContent>
          </Card>

          {/* Privacy */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Shield className="w-5 h-5 text-primary" />
                Privacy
              </CardTitle>
              <CardDescription>Control your privacy settings</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex items-center justify-between">
                <div>
                  <Label>Public Profile</Label>
                  <p className="text-sm text-muted-foreground">
                    Make your profile visible to others
                  </p>
                </div>
                <Switch
                  checked={settings.privacy.publicProfile}
                  onCheckedChange={(checked) => 
                    setSettings({
                      ...settings,
                      privacy: {...settings.privacy, publicProfile: checked}
                    })
                  }
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <Label>Share Progress</Label>
                  <p className="text-sm text-muted-foreground">
                    Allow others to see your learning progress
                  </p>
                </div>
                <Switch
                  checked={settings.privacy.shareProgress}
                  onCheckedChange={(checked) => 
                    setSettings({
                      ...settings,
                      privacy: {...settings.privacy, shareProgress: checked}
                    })
                  }
                />
              </div>
            </CardContent>
          </Card>

          {/* Save Button */}
          <div className="flex justify-end">
            <Button onClick={handleSave} size="lg">
              <Save className="w-4 h-4 mr-2" />
              {saved ? 'Saved!' : 'Save Changes'}
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
}
import { useState } from 'react';
import { useParams } from 'react-router-dom';
import { useLocation } from 'wouter';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import {
  ArrowLeft,
  Download,
  FileText,
  Sparkles,
  Copy,
  Check
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';

const mockSummary = {
  title: 'Quantum Physics - Wave-Particle Duality',
  generatedAt: '2024-12-14',
  content: `# Wave-Particle Duality

## Overview
Wave-particle duality is a fundamental concept in quantum mechanics that describes how every particle or quantum entity may be described as either a particle or a wave.

## Key Concepts

### 1. Dual Nature of Light
- Light exhibits both wave-like and particle-like properties
- Depends on the experimental setup and observation method
- Cannot be fully explained by classical physics alone

### 2. De Broglie Wavelength
The wavelength λ associated with a particle is given by:

λ = h / p

Where:
- h is Planck's constant
- p is the momentum of the particle

### 3. Double-Slit Experiment
- Demonstrates wave-particle duality most clearly
- When not observed: interference pattern (wave behavior)
- When observed: particle-like behavior
- Shows the role of measurement in quantum mechanics

## Important Formulas

1. Energy-frequency relation: E = hν
2. Momentum-wavelength: p = h/λ
3. Heisenberg uncertainty principle: ΔxΔp ≥ ℏ/2

## Applications
- Electron microscopy
- Quantum computing
- Semiconductor technology
- Photovoltaic cells

## Summary
Wave-particle duality challenges our classical understanding of nature and forms the foundation for modern quantum mechanics. It demonstrates that quantum entities don't fit neatly into classical categories and require a new framework for understanding.`
};

export default function Summary() {
  const { courseId } = useParams();
  const [, navigate] = useLocation();
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(mockSummary.content);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  const handleExportPDF = () => {
    // TODO: Implement PDF export
    console.log('Exporting to PDF...');
  };

  return (
    <div className="min-h-screen">
      {/* Header */}
      <div className="border-b sticky top-0 z-40 bg-background">
        <div className="max-w-7xl mx-auto px-8 py-4">
          <Breadcrumb>
            <BreadcrumbList>
              <BreadcrumbItem>
                <BreadcrumbLink 
                  onClick={() => navigate('/@me/content')}
                  className="flex items-center gap-2 cursor-pointer hover:text-primary transition-colors"
                >
                  <ArrowLeft className="w-4 h-4" />
                  Library
                </BreadcrumbLink>
              </BreadcrumbItem>
              <BreadcrumbSeparator />
              <BreadcrumbItem>
                <BreadcrumbLink 
                  onClick={() => navigate(`/@me/content/${courseId}`)}
                  className="cursor-pointer hover:text-primary transition-colors"
                >
                  Quantum Physics
                </BreadcrumbLink>
              </BreadcrumbItem>
              <BreadcrumbSeparator />
              <BreadcrumbItem>
                <BreadcrumbLink className="text-primary">Summary</BreadcrumbLink>
              </BreadcrumbItem>
            </BreadcrumbList>
          </Breadcrumb>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-4xl mx-auto p-8">
        <div className="mb-8">
          <div className="flex items-start justify-between mb-4">
            <div>
              <h1 className="text-4xl font-bold mb-2">
                {mockSummary.title}
              </h1>
              <div className="flex items-center gap-3">
                <Badge variant="secondary">
                  <Sparkles className="w-3 h-3 mr-1" />
                  AI Generated
                </Badge>
                <span className="text-sm text-muted-foreground">
                  Generated on {mockSummary.generatedAt}
                </span>
              </div>
            </div>
            <div className="flex gap-2">
              <Button variant="outline" onClick={handleCopy}>
                {copied ? <Check className="w-4 h-4 mr-2" /> : <Copy className="w-4 h-4 mr-2" />}
                {copied ? 'Copied' : 'Copy'}
              </Button>
              <Button onClick={handleExportPDF}>
                <Download className="w-4 h-4 mr-2" />
                Export PDF
              </Button>
            </div>
          </div>
        </div>

        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <FileText className="w-5 h-5 text-primary" />
              Summary Content
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="prose prose-sm max-w-none">
              <pre className="whitespace-pre-wrap font-sans text-foreground leading-relaxed">
                {mockSummary.content}
              </pre>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
import { useState } from "react";
import Confetti from "react-confetti";
import QuestionCard from "@/components/layout/QuestionCard";
import { questions } from "@/lib/data";
function TestMode() {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
  const [score, setScore] = useState(0);
  const [isFinished, setIsFinished] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);
  const handleAnswer = (optionIndex: number) => {
    if (showFeedback) return;
    setSelectedAnswer(optionIndex);
    setShowFeedback(true);
    if (optionIndex === questions[currentQuestion].correctIndex) {
      setScore(score + 1);
    }
  };
  const goToNext = () => {
    if (currentQuestion + 1 < questions.length) {
      setCurrentQuestion(currentQuestion + 1);
      setSelectedAnswer(null);
      setShowFeedback(false);
    } else {
      setIsFinished(true);
    }
  };
  const restartQuiz = () => {
    setCurrentQuestion(0);
    setScore(0);
    setSelectedAnswer(null);
    setShowFeedback(false);
    setIsFinished(false);
  };
  const calculateProgress = () => {
    if (isFinished) return 100;
    const baseProgress = (currentQuestion / questions.length) * 100;
    const questionProgress = selectedAnswer !== null ? (1 / questions.length) * 100 : 0;
    return baseProgress + questionProgress;
  };
  const percentage = (score / questions.length) * 100;
  const showConfetti = isFinished && percentage > 50;
  return (
    <div className="min-h-screen bg-background text-foreground flex flex-col items-center justify-center p-4">
      {showConfetti && <Confetti />}
     
      <div className="text-center mb-12">
        <h1 className="text-4xl font-bold text-foreground mb-2">Test Mode</h1>
        <p className="text-muted-foreground text-sm">Test on topic_name</p>
      </div>
      <div className="w-full max-w-2xl mb-8">
        <div className="bg-border/30 h-1.5 rounded-full overflow-hidden">
          <div
            className="h-full bg-foreground/80 transition-all duration-500 ease-out"
            style={{ width: `${calculateProgress()}%` }}
          ></div>
        </div>
        <div className="flex justify-between mt-2 text-xs text-muted-foreground">
          <span>Question {currentQuestion + 1} of {questions.length}</span>
          <span>{Math.round(calculateProgress())}% Complete</span>
        </div>
      </div>
      {!isFinished ? (
        <>
          <QuestionCard
            showFeedback={showFeedback}
            onAnswer={handleAnswer}
            data={questions[currentQuestion]}
            current={currentQuestion}
            total={questions.length}
            selected={selectedAnswer}
          />
         
          <div className="mt-8 min-h-[60px]">
            {showFeedback && (
              <button
                className="bg-foreground text-background py-3 px-8 rounded-md font-medium hover:bg-foreground/90 transition-all"
                onClick={goToNext}
              >
                {currentQuestion + 1 < questions.length
                  ? "Continue"
                  : "View Results"}
              </button>
            )}
          </div>
        </>
      ) : (
        <div className="text-center bg-card border border-border/50 rounded-lg p-12 shadow-sm max-w-lg w-full">
          <div className="mb-8">
            <div className="text-6xl font-bold text-foreground mb-2">
              {Math.round((score / questions.length) * 100)}%
            </div>
            <div className="text-sm text-muted-foreground uppercase tracking-wider">
              Final Score
            </div>
          </div>
         
          <div className="mb-8 pb-8 border-b border-border/30">
            <p className="text-foreground/80">
              You answered <span className="font-semibold text-foreground">{score}</span> out of{" "}
              <span className="font-semibold text-foreground">{questions.length}</span> questions correctly
            </p>
          </div>
         
          <button
            className="bg-foreground text-background py-3 px-8 rounded-md font-medium hover:bg-foreground/90 transition-all w-full"
            onClick={restartQuiz}
          >
            Retake Test
          </button>
        </div>
      )}
    </div>
  );
}
export default TestMode;import { useState } from 'react';
import { useParams } from 'react-router-dom';
import { useLocation } from 'wouter';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import {
  ArrowLeft,
  Trophy,
  Target,
  TrendingUp,
  Clock,
  CheckCircle2,
  XCircle,
  RotateCcw,
  Zap
} from 'lucide-react';
import { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from '@/components/ui/breadcrumb';

const mockTests = [
  { id: 1, name: 'Chapter 1: Introduction', score: 95, totalQuestions: 20, date: '2 days ago', status: 'completed' },
  { id: 2, name: 'Chapter 2: Wave Mechanics', score: 87, totalQuestions: 25, date: '5 days ago', status: 'completed' },
  { id: 3, name: 'Chapter 3: Quantum States', score: 78, totalQuestions: 30, date: '1 week ago', status: 'completed' },
  { id: 4, name: 'Midterm Practice', score: 92, totalQuestions: 50, date: '2 weeks ago', status: 'completed' },
];

const mockQuestions = [
  {
    id: 1,
    question: 'What is the Heisenberg Uncertainty Principle?',
    userAnswer: 'A principle stating you cannot simultaneously measure position and momentum with precision',
    correctAnswer: 'A principle stating you cannot simultaneously measure position and momentum with precision',
    isCorrect: true,
    explanation: 'The Heisenberg Uncertainty Principle is a fundamental concept in quantum mechanics.'
  },
  {
    id: 2,
    question: 'Define superposition in quantum mechanics.',
    userAnswer: 'A quantum system can exist in multiple states',
    correctAnswer: 'A quantum system can exist in multiple states simultaneously until measured',
    isCorrect: false,
    explanation: 'Superposition collapses upon measurement, which is a key aspect of the principle.'
  },
  {
    id: 3,
    question: 'What experiment demonstrated wave-particle duality?',
    userAnswer: 'Double-slit experiment',
    correctAnswer: 'Double-slit experiment',
    isCorrect: true,
    explanation: 'The double-slit experiment is a classic demonstration of wave-particle duality.'
  },
];

export default function Testreviews() {
  const { courseId } = useParams();
  const [, navigate] = useLocation();
  const [selectedTest, setSelectedTest] = useState<number | null>(null);

  const currentTest = mockTests.find(t => t.id === selectedTest);
  const averageScore = Math.round(mockTests.reduce((acc, t) => acc + t.score, 0) / mockTests.length);

  // Main Test Review List
  if (!selectedTest) {
    return (
      <div className="flex-1 overflow-y-auto">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          {/* Header */}
          <div className="mb-8">
            <Breadcrumb>
              <BreadcrumbList>
                <BreadcrumbItem>
                  <BreadcrumbLink onClick={() => navigate('/@me/content')} className="cursor-pointer">
                    Library
                  </BreadcrumbLink>
                </BreadcrumbItem>
                <BreadcrumbSeparator />
                <BreadcrumbItem>
                  <BreadcrumbLink onClick={() => navigate(`/@me/content/${courseId}`)} className="cursor-pointer">
                    Quantum Physics
                  </BreadcrumbLink>
                </BreadcrumbItem>
                <BreadcrumbSeparator />
                <BreadcrumbItem>
                  <BreadcrumbLink className="text-primary font-medium">Test Reviews</BreadcrumbLink>
                </BreadcrumbItem>
              </BreadcrumbList>
            </Breadcrumb>
            <h1 className="text-3xl font-bold mt-4">Test Reviews</h1>
            <p className="text-muted-foreground">Track your progress and review past tests.</p>
          </div>

          {/* Performance Stats */}
          <div className="grid md:grid-cols-3 gap-6 mb-12">
            <Card>
              <CardHeader className="flex flex-row items-center justify-between pb-2">
                <CardTitle className="text-sm font-medium">Average Score</CardTitle>
                <Trophy className="w-4 h-4 text-muted-foreground" />
              </CardHeader>
              <CardContent>
                <div className="text-2xl font-bold">{averageScore}%</div>
              </CardContent>
            </Card>
            <Card>
              <CardHeader className="flex flex-row items-center justify-between pb-2">
                <CardTitle className="text-sm font-medium">Tests Completed</CardTitle>
                <Target className="w-4 h-4 text-muted-foreground" />
              </CardHeader>
              <CardContent>
                <div className="text-2xl font-bold">{mockTests.length}</div>
              </CardContent>
            </Card>
            <Card>
              <CardHeader className="flex flex-row items-center justify-between pb-2">
                <CardTitle className="text-sm font-medium">Improvement</CardTitle>
                <TrendingUp className="w-4 h-4 text-muted-foreground" />
              </CardHeader>
              <CardContent>
                <div className="text-2xl font-bold text-green-600">+12%</div>
                <p className="text-xs text-muted-foreground">from last month</p>
              </CardContent>
            </Card>
          </div>

          {/* Test History */}
          <div>
            <h2 className="text-2xl font-bold mb-6">Test History</h2>
            <div className="space-y-4">
              {mockTests.map((test) => (
                <Card
                  key={test.id}
                  onClick={() => setSelectedTest(test.id)}
                  className="cursor-pointer hover:bg-muted/50 transition-colors"
                >
                  <CardContent className="p-4">
                    <div className="flex items-center justify-between">
                      <div className="flex-1">
                        <div className="flex items-center gap-3 mb-2">
                          <h3 className="font-semibold">{test.name}</h3>
                          <Badge variant={test.score >= 80 ? "default" : "secondary"}>
                            {test.score}%
                          </Badge>
                        </div>
                        <div className="flex items-center gap-4 text-sm text-muted-foreground">
                          <span className="flex items-center gap-1.5">
                            <Target className="w-3.5 h-3.5" />
                            {test.totalQuestions} questions
                          </span>
                          <span className="flex items-center gap-1.5">
                            <Clock className="w-3.5 h-3.5" />
                            {test.date}
                          </span>
                        </div>
                        <Progress value={test.score} className="mt-3 h-2" />
                      </div>
                      {test.score >= 90 ? (
                        <Trophy className="w-8 h-8 text-yellow-500 ml-6" />
                      ) : (
                        <Target className="w-8 h-8 text-muted-foreground ml-6" />
                      )}
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Detailed Test Review Page
  return (
    <div className="flex-1 overflow-y-auto">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Header */}
        <div className="mb-8">
          <Button variant="ghost" onClick={() => setSelectedTest(null)} className="mb-4">
            <ArrowLeft className="w-4 h-4 mr-2" />
            Back to All Tests
          </Button>
          <h1 className="text-3xl font-bold">{currentTest?.name} Review</h1>
        </div>

        {/* Score Summary */}
        <Card className="mb-8">
          <CardHeader>
            <CardTitle>Score Summary</CardTitle>
          </CardHeader>
          <CardContent className="text-center p-8">
            <p className="text-sm text-muted-foreground">Final Score</p>
            <p className="text-6xl font-bold my-2">{currentTest?.score}%</p>
            <p className="text-muted-foreground">
              {currentTest && Math.round((currentTest.score / 100) * currentTest.totalQuestions)} / {currentTest?.totalQuestions} correct
            </p>
            <Button className="mt-6">
              <RotateCcw className="w-4 h-4 mr-2" />
              Retake Test
            </Button>
          </CardContent>
        </Card>

        {/* Question Review Tabs */}
        <Tabs defaultValue="review" className="w-full">
          <TabsList className="grid grid-cols-2">
            <TabsTrigger value="review">Question Review</TabsTrigger>
            <TabsTrigger value="insights">AI Insights</TabsTrigger>
          </TabsList>

          <TabsContent value="review" className="mt-6">
            <div className="space-y-6">
              {mockQuestions.map((q) => (
                <Card key={q.id}>
                  <CardHeader>
                    <div className="flex items-start justify-between gap-4">
                      <CardTitle className="flex-1 text-base">
                        <span className="text-muted-foreground mr-2">Q{q.id}.</span>
                        {q.question}
                      </CardTitle>
                      {q.isCorrect ? (
                        <CheckCircle2 className="w-6 h-6 text-green-500 flex-shrink-0" />
                      ) : (
                        <XCircle className="w-6 h-6 text-red-500 flex-shrink-0" />
                      )}
                    </div>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div>
                      <p className="text-sm font-medium mb-1">Your Answer:</p>
                      <p className={`text-sm ${q.isCorrect ? 'text-foreground' : 'text-red-600'}`}>
                        {q.userAnswer}
                      </p>
                    </div>
                    {!q.isCorrect && (
                      <div>
                        <p className="text-sm font-medium mb-1">Correct Answer:</p>
                        <p className="text-sm text-green-600">{q.correctAnswer}</p>
                      </div>
                    )}
                    <div className="bg-muted/50 rounded-lg p-3 border">
                      <p className="text-sm flex items-start gap-2 text-muted-foreground">
                        <Zap className="w-4 h-4 text-primary mt-0.5 flex-shrink-0" />
                        <span>{q.explanation}</span>
                      </p>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </TabsContent>

          <TabsContent value="insights" className="mt-6">
            <div className="grid md:grid-cols-2 gap-6">
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2 text-base">
                    <TrendingUp className="w-5 h-5 text-green-500" />
                    Strengths
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <ul className="space-y-2 text-sm text-muted-foreground">
                    <li className="flex items-start gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5 flex-shrink-0" />
                      <span>Strong grasp of fundamental principles.</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5 flex-shrink-0" />
                      <span>Excellent understanding of wave mechanics.</span>
                    </li>
                  </ul>
                </CardContent>
              </Card>
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2 text-base">
                    <Target className="w-5 h-5 text-orange-500" />
                    Areas to Improve
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <ul className="space-y-2 text-sm text-muted-foreground">
                    <li className="flex items-start gap-2">
                      <XCircle className="w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0" />
                      <span>Review superposition collapse mechanisms.</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <XCircle className="w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0" />
                      <span>Practice measurement interpretation.</span>
                    </li>
                  </ul>
                </CardContent>
              </Card>
            </div>
          </TabsContent>
        </Tabs>
      </div>
    </div>
  );
}
